var W=ee;function ee(){let a=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((d,[D,g])=>({...d,[D]:g,[`${D}s`]:g}),{}),F=function(...d){if(d.length<1)return[];let D;d[0].startsWith("subtract")&&(D=!0,d[0].startsWith("subtract")&&d.length===1&&(d=d[0].split(",")),d=d.slice(1));let g=d.length===1?d[0]?.split(/,/):d;return g&&g.length&&(d=g.map(h=>h.trim())),d.map(function(h){return h.toLowerCase().split(/\s/).map(i=>(i=i.trim(),parseInt(i)?D?-i:+i:i))})};return function(d,...D){let g=F(...D);return g.length&&g.forEach(([h,i])=>{i=a[i],+h&&i&&d[`set${i}`](d[`get${i}`]()+ +h)}),d}}var H=te;function te(){let a=(D,g)=>{let h=isNaN(D),i=isNaN(g);if(h&&!i){let[S,p,n]=Array(3).fill("start- and/or end date are not valid");return{error:!0,message:S,full:p,clean:n}}if(i){let[S,p,n]=Array(3).fill("end date not valid");return{error:!0,message:S,full:p,clean:n}}if(h){let[S,p,n]=Array(3).fill("start date not valid");return{error:!0,message:S,full:p,clean:n}}return{error:!1}},F=d();return function({start:g,end:h}={}){let i=new Date(Date.parse(g)),S=new Date(Date.parse(h)),p=a(i,S);if(p.error)return p;let n=new Date(g),s=new Date(h),r=Math.abs(s-n),c=new Date(r),u=c.getUTCFullYear()-1970,m=c.getUTCMonth(),f=c.getUTCDate()-1,w=c.getUTCHours(),N=c.getUTCMinutes(),$=c.getUTCSeconds(),b=c.getUTCMilliseconds(),T={from:n,to:s,years:u,months:m,days:f,hours:w,minutes:N,seconds:$,milliseconds:b};return T.full=F({values:T,full:!0}),T.clean=F({values:T}),T};function d(){let D=(...n)=>s=>n.reduce((r,c)=>c(r),s),g=(n,s)=>n===1?s.slice(0,-1):s;return D(({values:n,full:s})=>[Object.entries(n).filter(([r])=>/^(years|month|days|hours|minutes|seconds)/i.test(r)),s],([n,s])=>s?n:n.filter(([,r])=>s?+r:r>0),n=>n.reduce((s,[r,c])=>[...s,`${c} ${g(c,r)}`],[]),n=>n.length<1?"Dates are equal":`${n.slice(0,-1).join(", ")}${n.length>1?" and ":""}${n.slice(-1).shift()}`)}}var le=j();function j(){let[a,F,d,D]=["2-digit","numeric","long","short"],g={fixed:{MM:{month:d},M:{month:D},m:{month:F},mm:{month:a},yyyy:{year:F},yy:{year:a},WD:{weekday:d},wd:{weekday:D},d:{day:F},dd:{day:a},h:{hour:F},hh:{hour:a},mi:{minute:F},mmi:{minute:a},s:{second:F},ss:{second:a},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:r=>({timeZoneName:r.slice(4)}),hrc:r=>({hourCycle:`h${r.slice(4)}`}),ds:r=>({dateStyle:r.slice(3)}),ts:r=>({timeStyle:r.slice(3)}),tz:r=>({timeZone:r.slice(3)}),e:r=>({era:r.slice(2)}),l:r=>({locale:r.slice(2)})}},h={...g,retrieveDyn(r){let c=r?.slice(0,r.indexOf(":"));return g.dynamic[c]&&g.dynamic[c](r)},get re(){return new RegExp(`\\b(${Object.keys(g.fixed).join("|")})\\b`,"g")}},i=(r="dtf",c=0)=>{let u=` ${r.replace(/(?<=\{)(.+?)(?=})/g,f=>`[${c++}]`).replace(/[{}]/g,"").trim()} `,m=r.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return m},formatString(f){u=f},set formatStr(f){u=f},get formatStr(){return u},get units(){return u.match(h.re)||[]},finalize(f="",w="",N="",$=""){return u.replace(/~([\d+]?)/g,"$1").replace(/dtf/,f).replace(/era/,N).replace(/dp\b|~dp\b/,w).replace(/yn\b/,$).replace(/\[(\d+?)]/g,(b,T)=>m[T].trim()).trim()}}},S=r=>r.replace(/\s+/g,""),p=(...r)=>r?.reduce((c,u)=>({...c,...h.retrieveDyn(u)||h.fixed[u]}),h.fixed.dl),n=(r,c,u)=>{let m=p(...S(u).split(",")),f=Intl.DateTimeFormat(m.locale,m).format(r);return c.finalize(f)},s=(r,c,u)=>{let m=p(...c.units.concat(S(u).split(",")).flat()),f={...h.fixed},w=($,b)=>m[$]==="numeric"&&b.startsWith("0")?b.slice(1):b,N=Intl.DateTimeFormat(m.locale,m).formatToParts(r).reduce(($,b)=>b.type==="literal"?$:{...$,[b.type]:w(b.type,b.value)},{});return f.ms=m.fractionalSecondDigits?f.msp:f.ms,f.yyyy=N.relatedYear?f.ry:f.yyyy,c.formatStr=c.formatStr.replace(h.re,$=>N[Object.keys(f[$]).shift()]||$),c.finalize(void 0,N.dayPeriod,N.era,N.yearName)};return(r,c,u="l:default")=>/ds:|ts:/.test(u)?n(r,i(void 0),u):s(r,i(c||void 0),u)}var E=ne;function ne(a,F){let d=!0,D=j(),g=e=>!(isNaN(parseInt(e))&&isNaN(+e)),h=e=>e?.constructor===Object,i=e=>+e.slice(e.indexOf("+")+1).replace(":","")||0,S=e=>e.localeInfo?.timeZone||Intl.DateTimeFormat().resolvedOptions().timeZone,p=(e,t=2)=>`${e}`.padStart(t,"0"),n=e=>e.map(t=>String(t)?.padStart(2,"0")??t),s=e=>n(Y(e)).join("-"),r=e=>Object.entries(e).filter(([,t])=>g(t)),c=(e,t=!1)=>{e=a(e);let o=t?0:1,l={year:e.getFullYear(),month:e.getMonth()+o,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds(),monthZeroBased:t,monthName:e.monthName,weekDay:e.weekDay,locale:e.locale||"no locale (yet)"};return{get object(){return l},get array(){return Object.values(l).filter(y=>!isNaN(parseInt(y)))}}},u=e=>{let t={timeZone:S(e),hourCycle:"h23"},o;try{return a(new Date(new Date(e.toLocaleString("en",t))))}catch(l){return console.error(`Can't retrieve localized date/time value for ${t.timeZone}: ${l.message}`),a(e)}},m=e=>console.error(`clone${e?"Time":"Date"}To: no toDate given`),f=(e,t)=>{t=a(t??new Date);let o=a(e);if(t){let[l,y,I]=o.date;return t.date={year:l,month:y,date:I},o.locale&&(t.locale={locale:o.locale.locale,timeZone:o.locale.timeZone}),t}return m(),o},w=(e,t)=>{t=a(t??new Date);let o=a(e),{hour:l,minutes:y,seconds:I,ms:O}=o;return t.time={hour:l,minutes:y,seconds:I,ms:O},o.locale?(t.locale={locale:o.locale.locale,timeZone:o.locale.timeZone},t):(m(1),o)},N=e=>{e=a(e);let t={};if(!e.locale)return e.toLocaleString();let{locale:o,timeZone:l}=e.locale;return e.locale?.timeZone&&(t={timeZone:e.locale.timeZone}),e.toLocaleString(o,t)},$=(e,...t)=>{e=a(e);let o,l,y;return e.locale&&(o=e.locale.locale,l=e.locale.timeZone,y=e.formats),t.length===1?D(e,t[0],y):t.length?D(e,...t):e.toLocaleString(o||[],l?{timeZone:l}:void 0)},b=(e,t)=>h(t)&&r(t).forEach(([o,l])=>e[`set${o}`](l))&&!0||!1,T=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()??0],Y=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],L=(e,t)=>b(e,t)||T(e),U=(e,t)=>b(e,t)||Y(e),k=H(),z=(e,t)=>a(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),re=e=>[e.getFullYear(),e.getMonth(),e.getDate()],G=e=>a(new Date(e)).relocate(e.localeInfo),X=W(),M=(e,...t)=>a(X(e,...t)),A=(e,t)=>[`${e&&!(Array.isArray(e)&&e.length<1)?`l:${e}`:""}`,`${t?`tz:${t}`:""}`].filter(o=>o).join(","),_=function(e,{locale:t,timeZone:o}={}){if(t||o){let l=F(t||[],o);e.localeInfo={locale:l?.locale||navigator?.language||"en",timeZone:l?.timeZone||Intl.DateTimeFormat().resolvedOptions().timeZone},e.formats=A(e.localeInfo.locale,e.localeInfo.timeZone)}return e.localeInfo??void 0},C=(e,{locale:t,timeZone:o,validate:l=!0}={})=>((t||o)&&(e.localeInfo=_(e,{locale:t,timeZone:o,validate:l})),e.localeInfo),q=e=>(delete e.localeInfo,a(e)),K=function(e,t,o,l){return(t||o)&&C(e,{locale:t,timeZone:o}),a(e)},P=function(e,t){return e=a(e),e.format(t?"MM":"WD",`l:${e.locale?.locale||"utc"}`)},J=e=>{let t={};if(e=a(e),!e.locale)return e.toLocaleDateString();let{locale:o,timeZone:l}=e.locale;return e.locale?.timeZone&&(t={timeZone:e.locale.timeZone}),e.toLocaleDateString(o,t)},Q=(e,t)=>{let o=T(e).reduce((l,y,I)=>[...l,I<3?p(y):p(y,3)],[]);return`${o.slice(0,3).join(":")}${t?`.${o.slice(-1)}`:""}`},B=e=>{let t=S(e),o=new Date(e.getFullYear(),0,1,14),l=new Date(new Date(o).setMonth(6)),y=Intl.DateTimeFormat("en-CA",{year:"numeric",timeZone:t,timeZoneName:"shortOffset"}),[I,O]=[y.format(o),y.format(l)];return i(I)-i(O)!==0};function V(e,t){let o=0;for(e=a(e),t=a(t),e.time=t.time={hour:0,minutes:0,seconds:0,milliseconds:0},e>t&&([e,t]=[t,e]);e<nexDate;)e.add("1 day"),o+=1;return o}function Z(e,{day:t,next:o=!1,midnight:l=!0}={}){e=a(e);let y=e.clone,I=y.getDay();y.time=l?{hour:0,minutes:0,seconds:0,milliseconds:0}:{};let O="sun,mon,tue,wed,thu,fri,sat".split(",").findIndex(R=>R===t),x=`${o?1:-1} days`;return O<0?e:function(){for(I=I===O?y.add(x).getDay():I;I!==O;)I=y.add(x).getDay();return y}()}return{clone:G,localizedDT:u,hasDST:B,getTimezone:S,dateStr:J,firstWeekday:e=>({sunday:t=!1,midnight:o=!1}={})=>Z(e,{day:t?"sun":"mon",midnight:o}),next:e=>(t,{midnight:o=!1}={})=>Z(e,{day:t,midnight:o,next:!0}),previous:e=>(t,{midnight:o=!1}={})=>Z(e,{day:t,midnight:o}),locale2Formats:e=>A(e.localeInfo?.locale,e.localeInfo?.timeZone),year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(v-1)||e.getMonth()+1,date:(e,{year:t,month:o,date:l}={})=>U(e,{FullYear:t,Month:g(o)?o-1:o,Date:l}),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>w(e,t),cloneDateTo:e=>t=>f(e,t),time:(e,{hour:t,minutes:o,seconds:l,milliseconds:y}={})=>L(e,{Hours:t,Minutes:o,Seconds:l,Milliseconds:y}),timeStr:e=>(t=!1)=>Q(e,t),dateISOStr:e=>s(e),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>P(e,!0),weekDay:e=>P(e),self:e=>e,local:e=>N(e),locale:(e,{locale:t,timeZone:o}={})=>C(e,{locale:t,timeZone:o}),removeLocale:e=>q(e),relocate:e=>({locale:t,timeZone:o}={})=>K(e,t,o),differenceFrom:e=>t=>k({start:e,end:t}),values:e=>(t=!1)=>c(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>z(e.getFullYear(),e.getMonth()),isLeapYear:e=>z(e.getFullYear(),1)===29,format:e=>(...t)=>$(e,...t),daysUntil:e=>t=>V(e,t),internal:()=>{},addYears:e=>(t=1)=>M(e,`${t} years`),addMonths:e=>(t=1)=>M(e,`${t} months`),addWeeks:e=>(t=1)=>M(e,`${t*7} days`),addDays:e=>(t=1)=>M(e,`${t} days`),nextYear:e=>M(e,"1 year"),nextWeek:e=>M(e,"7 days"),previousWeek:e=>M(e,"subtract, 7 days"),previousYear:e=>M(e,"subtract, 1 year"),nextMonth:e=>M(e,"1 month"),previousMonth:e=>M(e,"subtract, 1 month"),tomorrow:e=>M(e,"1 day"),yesterday:e=>M(e,"subtract, 1 day"),add:e=>(...t)=>M(e,...t),subtract:e=>(...t)=>M(e,...["subtract"].concat([t]).flat())}}var he=oe();function oe(){let a=E(i,D),F={get:(n,s)=>n[s]?S(n,s):a[s]?.(n),set:(n,s,r)=>a[s]?a[s](n,r):n[s],ownKeys:n=>Object.getOwnPropertyNames(a),has:(n,s)=>s in a||s in n};function d({name:n,fn:s,root:r,isMethod:c,proxifyResult:u}={}){if(!n||!s||!(s instanceof Function))return console.error("es-date-fiddler (extendWith): cannot extend without name and/or fn (function)");if(r)return Object.defineProperty(p,n,{value:(...m)=>{let f=s(...m);return f instanceof Date?i(f):f}}),console.log(`\u2714 created '${n}' root level method`);a=Object.freeze({...a,[n]:m=>(m=i(m),m.localeInfo&&m.relocate(m.localeInfo),c?(...f)=>u?i(s(m,...f)):s(m,...f):u?i(s(m)):s(m))}),console.log(`\u2714 created '${n}' ${c?"method":"getter"}`)}function D(n,s,r=!0){let c=u=>console.error(`invalid locale (time zone: "${u.timeZone}", locale: "${u.locale}"), associated your locale instead`);try{return Intl.DateTimeFormat(n,{timeZone:s}).resolvedOptions()}catch{return r&&c({locale:n,timeZone:s}),Intl.DateTimeFormat().resolvedOptions()}}function g(){return p()}function h({locale:n,timeZone:s}={}){if(!n&&!s)return!1;let r=D(n,s,!1);return n&&!s?r.locale===n:(s&&!n||r.locale===n)&&s===r.timeZone}function i(n){return new Proxy(n,F)}function S(n,s){return s in n&&n[s]instanceof Function?n[s].bind(n):n[s]}function p(n,s){n=Array.isArray(n)?new Date(...n):n;let r=n?.locale||n?.timeZone,c=(n||"")instanceof Date,u=r?new Date:new Date(c?n:Date.parse(n)),m=isNaN(u)?new Date(Date.now()):u,f=i(m);return(r||s)&&(f.locale=r?n:s),f}return Object.defineProperties(p,{now:{get(){return g()}},extendWith:{get(){return d}},validateLocale:{get(){return h}},ownFns:{get(){return Object.getOwnPropertyDescriptors(a)}}}),p}export{oe as DateXFactory,he as default};
