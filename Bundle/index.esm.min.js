var z=L;function L(){let l=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((i,[h,o])=>({...i,[h]:o,[`${h}s`]:o}),{}),D=function(...i){if(i.length<1)return[];let h;i[0].startsWith("subtract")&&(h=!0,i[0].startsWith("subtract")&&i.length===1&&(i=i[0].split(",")),i=i.slice(1));let o=i.length===1?i[0]?.split(/,/):i;return o&&o.length&&(i=o.map(s=>s.trim())),i.map(function(s){return s.toLowerCase().split(/\s/).map(c=>(c=c.trim(),+c?h?-c:+c:c))})};return function(i,...h){let o=D(...h);return o.length&&o.forEach(([s,c])=>{c=l[c],+s&&c&&i[`set${c}`](i[`get${c}`]()+ +s)}),i}}var x=W;function W(){let l=(h,o)=>{let s=isNaN(h),c=isNaN(o);if(s&&!c){let[p,y,u]=Array(3).fill("start and end date are not valid");return{error:!0,message:p,full:y,clean:u}}if(c){let[p,y,u]=Array(3).fill("end date not valid");return{error:!0,message:p,full:y,clean:u}}if(s){let[p,y,u]=Array(3).fill("start date not valid");return{error:!0,message:p,full:y,clean:u}}return{error:!1}},D=i();return function({start:o,end:s}={}){let c=new Date(Date.parse(o)),p=new Date(Date.parse(s)),y=l(c,p);if(y.error)return y;let u=new Date(o),d=new Date(s),n=Math.abs(d-u),a=new Date(n),g=a.getUTCFullYear()-1970,S=a.getUTCMonth(),m=a.getUTCDate()-1,Y=a.getUTCHours(),b=a.getUTCMinutes(),$=a.getUTCSeconds(),f=a.getUTCMilliseconds(),I={years:g,months:S,days:m,hours:Y,minutes:b,seconds:$,milliseconds:f};return I.full=D({values:I,full:!0}),I.clean=D({values:I}),I};function i(){let h=(...u)=>d=>u.reduce((n,a)=>a(n),d),o=(u,d)=>u===1?d.slice(0,-1):d;return h(({values:u,full:d})=>[Object.entries(u).filter(([n])=>/^(years|month|days|hours|minutes|seconds)/i.test(n)),d],([u,d])=>d?u:u.filter(([,n])=>d?+n:n>0),u=>u.reduce((d,[n,a])=>[...d,`${a} ${o(a,n)}`],[]),u=>u.length<1?"Dates are equal":`${u.slice(0,-1).join(", ")}${u.length>1?" and ":""}${u.slice(-1).shift()}`)}}var q=N();function N(){let[l,D,i,h]=["2-digit","numeric","long","short"],o={fixed:{MM:{month:i},M:{month:h},m:{month:D},mm:{month:l},yyyy:{year:D},yy:{year:l},WD:{weekday:i},wd:{weekday:h},d:{day:D},dd:{day:l},h:{hour:D},hh:{hour:l},mi:{minute:D},mmi:{minute:l},s:{second:D},ss:{second:l},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:n=>({timeZoneName:n.slice(4)}),hrc:n=>({hourCycle:`h${n.slice(4)}`}),ds:n=>({dateStyle:n.slice(3)}),ts:n=>({timeStyle:n.slice(3)}),tz:n=>({timeZone:n.slice(3)}),e:n=>({era:n.slice(2)}),l:n=>({locale:n.slice(2)})}},s={...o,retrieveDyn(n){let a=n?.slice(0,n.indexOf(":"));return o.dynamic[a]&&o.dynamic[a](n)},get re(){return new RegExp(`\\b(${Object.keys(o.fixed).join("|")})\\b`,"g")}},c=(n="dtf",a=0)=>{let g=` ${n.replace(/(?<=\{)(.+?)(?=})/g,m=>`[${a++}]`).replace(/[{}]/g,"").trim()} `,S=n.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return S},formatString(m){g=m},set formatStr(m){g=m},get formatStr(){return g},get units(){return g.match(s.re)||[]},finalize(m="",Y="",b="",$=""){return g.replace(/~([\d+]?)/g,"$1").replace(/dtf/,m).replace(/era/,b).replace(/dp\b|~dp\b/,Y).replace(/yn\b/,$).replace(/\[(\d+?)]/g,(f,I)=>S[I].trim()).trim()}}},p=n=>n.replace(/\s+/g,""),y=(...n)=>n?.reduce((a,g)=>({...a,...s.retrieveDyn(g)||s.fixed[g]}),s.fixed.dl),u=(n,a,g)=>{let S=y(...p(g).split(",")),m=Intl.DateTimeFormat(S.locale,S).format(n);return a.finalize(m)},d=(n,a,g)=>{let S=y(...a.units.concat(p(g).split(",")).flat()),m={...s.fixed},Y=($,f)=>S[$]==="numeric"&&f.startsWith("0")?f.slice(1):f,b=Intl.DateTimeFormat(S.locale,S).formatToParts(n).reduce(($,f)=>f.type==="literal"?$:{...$,[f.type]:Y(f.type,f.value)},{});return m.ms=S.fractionalSecondDigits?m.msp:m.ms,m.yyyy=b.relatedYear?m.ry:m.yyyy,a.formatStr=a.formatStr.replace(s.re,$=>b[Object.keys(m[$]).shift()]||$),a.finalize(void 0,b.dayPeriod,b.era,b.yearName)};return(n,a,g="l:default")=>/ds:|ts:/.test(g)?u(n,c(void 0),g):d(n,c(a||void 0),g)}var Z=P;function P(l){let D=N(),i=(e,t)=>{let r={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(r):r},h=(e,t)=>(t&&(e.localeInfo=I(e,t)),e.localeInfo),o=(e,t)=>{t=l(t??new Date);let r=l(e);if(t){let{year:M,month:F,date:T}=r;t.date={year:M,month:F,date:T},r.locale&&(t.locale={locale:r.locale.l,timeZone:r.locale.tz})}return t},s=(e,t)=>{t=l(t??new Date);let r=l(e),{hour:M,minutes:F,seconds:T,ms:C}=r;return t.time={hour:M,minutes:F,seconds:T,milliseconds:C},r.locale&&(t.locale={locale:r.locale.l,timeZone:r.locale.tz}),t},c=function(e){let r=j(e)?.replace(/l:/,"locale: ").replace(/tz:/,"timeZone: ");return e.toLocaleString()+` !!invalid locale info => ${r}`},p=(e,t)=>{if(e=l(e),!e.locale)return e.toLocaleString();e.locale?.timeZone&&(t={...t??{},timeZone:e.locale.timeZone});try{return e.toLocaleString(e.locale.l,t)}catch{return c(e)}},y=(e,...t)=>{e=l(e);let[r,M]=[e.locale,e.timeZone],F=j(e);try{return t.length===1?D(e,t[0],F):t.length?D(e,...t):e.toLocaleString(r,M?{timeZone:M}:void 0)}catch{return c(l(e))}},u=(e,{year:t,month:r,date:M}={})=>{let[F,T,C]=a(e);e.setFullYear(t||F),e.setMonth((r||T+1)-1),e.setDate(M||C)},d=x(),n=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],a=e=>[e.getFullYear(),e.getMonth(),e.getDate()],g=(e,t)=>{let r=n(e),M=t?`.${r.pop()}`.padStart(3,"0"):"";return`${r.slice(0,3).map(F=>`${F}`.padStart(2,"0")).join(":")}${M}`},S=function(e,{hour:t,minutes:r,seconds:M,milliseconds:F}={}){let[T,C,w,A]=n(e);e.setHours(t??T),e.setMinutes(r??C),e.setSeconds(M??w),e.setMilliseconds(F??A)},m=(e,t)=>l(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),Y=e=>[e.getFullYear(),e.getMonth(),e.getDate()],b=e=>l(new Date(e)),$=z(),f=(e,...t)=>l($(e,...t)),I=function(e,{locale:t,timeZone:r}={}){[t,r]=[t||e.localeInfo?.locale,r||e.localeInfo?.timeZone];let M=[`${t?`l:${t}`:""}`,`${r?`tz:${r}`:""}`].filter(F=>F).join(", ");return e.localeInfo={...t?{locale:t}:{},...r?{timeZone:r}:{}},e.localeInfo},j=e=>{e=l(e);let[t,r]=[e.localeInfo?.locale,e.localeInfo?.timeZone];return[`${t?`l:${t}`:""}`,`${r?`tz:${r}`:""}`].filter(M=>M).join(", ")},H=e=>{e=l(e),delete e.localeInfo},O=function(e,t,r){return e=l(e),e.locale={locale:t,timeZone:r},e};return{...{clone:b,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(t-1)||e.getMonth()+1,date:(e,t)=>t&&u(e,t)||e.getDate(e),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>s(e,t),cloneDateTo:e=>t=>o(e,t),time:(e,t)=>t&&S(e,t)||n(e),timeStr:e=>(t=!1)=>g(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>(e=l(e),e.format("MM",`l:${e.locale?.locale||"utc"}`)),weekDay:e=>(e=l(e),e.format("WD",`l:${e.locale?.locale||"utc"}`)),self:e=>e,local:(e,t)=>p(e,t),locale:(e,t)=>h(e,t),removeLocale:e=>()=>H(e),relocate:e=>({locale:t,timeZone:r}={})=>O(e,t,r),differenceFrom:e=>t=>d({start:e,end:t}),values:e=>t=>i(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>m(e.getFullYear(),e.getMonth()),isLeapYear:e=>m(e.getFullYear(),1)===29,format:e=>(...t)=>y(e,...t)},...{addYears:e=>(t=1)=>f(e,`${t} years`),addMonths:e=>(t=1)=>f(e,`${t} months`),addWeeks:e=>(t=1)=>f(e,`${t*7} days`),addDays:e=>(t=1)=>f(e,`${t} days`),nextYear:e=>f(e,"1 year"),nextWeek:e=>f(e,"7 days"),previousWeek:e=>f(e,"subtract, 7 days"),previousYear:e=>f(e,"subtract, 1 year"),nextMonth:e=>f(e,"1 month"),previousMonth:e=>f(e,"subtract, 1 month"),tomorrow:e=>f(e,"1 day"),yesterday:e=>f(e,"subtract, 1 day"),add:e=>(...t)=>f(e,...t),subtract:e=>(...t)=>f(e,...["subtract"].concat([t]).flat())}}}var V=U();function U(){let l=Z(i),D={get:(o,s)=>!o[s]&&l[s]?.(o)||h(o,s),set:(o,s,c)=>l[s]?.(o,c)||o[s]};function i(o){return new Proxy(o,D)}function h(o,s){return s in o&&o[s]instanceof Function?o[s].bind(o):o[s]}return function(o,s){let c=o?.locale||o?.timeZone,p=(o||"")instanceof Date,y=c?new Date:new Date(p?o:Date.parse(o)),u=isNaN(y)?new Date(Date.now()):y,d=i(u);return(c||s)&&(d.locale=c?o:s),d}}export{U as DateXFactory,V as default};
