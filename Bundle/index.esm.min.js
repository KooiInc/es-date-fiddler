var N=O;function O(){let u=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((l,[y,o])=>({...l,[y]:o,[`${y}s`]:o}),{}),p=function(...l){if(l.length<1)return[];let y;l[0].startsWith("subtract")&&(y=!0,l[0].startsWith("subtract")&&l.length===1&&(l=l[0].split(",")),l=l.slice(1));let o=l.length===1?l[0]?.split(/,/):l;return o&&o.length&&(l=o.map(r=>r.trim())),l.map(function(r){return r.toLowerCase().split(/\s/).map(c=>(c=c.trim(),+c?y?-c:+c:c))})};return function(l,...y){let o=p(...y);return o.length&&o.forEach(([r,c])=>{c=u[c],+r&&c&&l[`set${c}`](l[`get${c}`]()+ +r)}),l}}var x=W;function W(){let u=(y,o)=>{let r=isNaN(y),c=isNaN(o);if(r&&!c){let[D,h,i]=Array(3).fill("start and end date are not valid");return{error:!0,message:D,full:h,clean:i}}if(c){let[D,h,i]=Array(3).fill("end date not valid");return{error:!0,message:D,full:h,clean:i}}if(r){let[D,h,i]=Array(3).fill("start date not valid");return{error:!0,message:D,full:h,clean:i}}return{error:!1}},p=l();return function({start:o,end:r}={}){let c=new Date(Date.parse(o)),D=new Date(Date.parse(r)),h=u(c,D);if(h.error)return h;let i=new Date(o),d=new Date(r),n=Math.abs(d-i),a=new Date(n),g=a.getUTCFullYear()-1970,M=a.getUTCMonth(),m=a.getUTCDate()-1,Y=a.getUTCHours(),$=a.getUTCMinutes(),S=a.getUTCSeconds(),f=a.getUTCMilliseconds(),I={years:g,months:M,days:m,hours:Y,minutes:$,seconds:S,milliseconds:f};return I.full=p({values:I,full:!0}),I.clean=p({values:I}),I};function l(){let y=(...i)=>d=>i.reduce((n,a)=>a(n),d),o=(i,d)=>i===1?d.slice(0,-1):d;return y(({values:i,full:d})=>[Object.entries(i).filter(([n])=>/^(years|month|days|hours|minutes|seconds)/i.test(n)),d],([i,d])=>d?i:i.filter(([,n])=>d?+n:n>0),i=>i.reduce((d,[n,a])=>[...d,`${a} ${o(a,n)}`],[]),i=>i.length<1?"Dates are equal":`${i.slice(0,-1).join(", ")}${i.length>1?" and ":""}${i.slice(-1).shift()}`)}}var X=C();function C(){let[u,p,l,y]=["2-digit","numeric","long","short"],o={fixed:{MM:{month:l},M:{month:y},m:{month:p},mm:{month:u},yyyy:{year:p},yy:{year:u},WD:{weekday:l},wd:{weekday:y},d:{day:p},dd:{day:u},h:{hour:p},hh:{hour:u},mi:{minute:p},mmi:{minute:u},s:{second:p},ss:{second:u},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:n=>({timeZoneName:n.slice(4)}),hrc:n=>({hourCycle:`h${n.slice(4)}`}),ds:n=>({dateStyle:n.slice(3)}),ts:n=>({timeStyle:n.slice(3)}),tz:n=>({timeZone:n.slice(3)}),e:n=>({era:n.slice(2)}),l:n=>({locale:n.slice(2)})}},r={...o,retrieveDyn(n){let a=n?.slice(0,n.indexOf(":"));return o.dynamic[a]&&o.dynamic[a](n)},get re(){return new RegExp(`\\b(${Object.keys(o.fixed).join("|")})\\b`,"g")}},c=(n="dtf",a=0)=>{let g=` ${n.replace(/(?<=\{)(.+?)(?=})/g,m=>`[${a++}]`).replace(/[{}]/g,"").trim()} `,M=n.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return M},formatString(m){g=m},set formatStr(m){g=m},get formatStr(){return g},get units(){return g.match(r.re)||[]},finalize(m="",Y="",$="",S=""){return g.replace(/~([\d+]?)/g,"$1").replace(/dtf/,m).replace(/era/,$).replace(/dp\b|~dp\b/,Y).replace(/yn\b/,S).replace(/\[(\d+?)]/g,(f,I)=>M[I].trim()).trim()}}},D=n=>n.replace(/\s+/g,""),h=(...n)=>n?.reduce((a,g)=>({...a,...r.retrieveDyn(g)||r.fixed[g]}),r.fixed.dl),i=(n,a,g)=>{let M=h(...D(g).split(",")),m=Intl.DateTimeFormat(M.locale,M).format(n);return a.finalize(m)},d=(n,a,g)=>{let M=h(...a.units.concat(D(g).split(",")).flat()),m={...r.fixed},Y=(S,f)=>M[S]==="numeric"&&f.startsWith("0")?f.slice(1):f,$=Intl.DateTimeFormat(M.locale,M).formatToParts(n).reduce((S,f)=>f.type==="literal"?S:{...S,[f.type]:Y(f.type,f.value)},{});return m.ms=M.fractionalSecondDigits?m.msp:m.ms,m.yyyy=$.relatedYear?m.ry:m.yyyy,a.formatStr=a.formatStr.replace(r.re,S=>$[Object.keys(m[S]).shift()]||S),a.finalize(void 0,$.dayPeriod,$.era,$.yearName)};return(n,a,g="l:default")=>/ds:|ts:/.test(g)?i(n,c(void 0),g):d(n,c(a||void 0),g)}var j=L;function L(u){let p=C(),l=(e,t)=>{let s={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(s):s},y=(e,t)=>(t&&(e.localeInfo=I(e,t)),e.localeInfo),o=(e,t)=>{t=u(t??new Date);let s=u(e);if(t){let{year:F,month:b,date:T}=s;t.date={year:F,month:b,date:T},s.locale&&(t.locale={locale:s.locale.l,timeZone:s.locale.tz})}return t},r=(e,t)=>{t=u(t??new Date);let s=u(e),{hour:F,minutes:b,seconds:T,ms:z}=s;return t.time={hour:F,minutes:b,seconds:T,milliseconds:z},s.locale&&(t.locale={locale:s.locale.l,timeZone:s.locale.tz}),t},c=function(e){let t=e.locale?.formats?.replace(/l:/,"locale: ").replace(/tz:/,"timeZone: ");return e.toLocaleString()+` !!invalid locale info => ${t}`},D=(e,t)=>{if(e=u(e),!e.locale)return e.toLocaleString();e.locale?.tz&&(t={...t??{},timeZone:e.locale.tz});try{return e.toLocaleString(e.locale.l,t)}catch{return c(e)}},h=(e,...t)=>{let s=u(e).locale;try{return t.length===1?p(e,t[0],s?.formats):t.length?p(e,...t):e.toLocaleString(s?.l)}catch{return c(u(e))}},i=(e,{year:t,month:s,date:F}={})=>{let[b,T,z]=a(e);e.setFullYear(t||b),e.setMonth((s||T+1)-1),e.setDate(F||z)},d=x(),n=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],a=e=>[e.getFullYear(),e.getMonth(),e.getDate()],g=(e,t)=>{let s=n(e),F=t?`.${s.pop()}`.padStart(3,"0"):"";return`${s.slice(0,3).map(b=>`${b}`.padStart(2,"0")).join(":")}${F}`},M=function(e,{hour:t,minutes:s,seconds:F,milliseconds:b}={}){let[T,z,w,A]=n(e);e.setHours(t??T),e.setMinutes(s??z),e.setSeconds(F??w),e.setMilliseconds(b??A)},m=(e,t)=>u(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),Y=e=>[e.getFullYear(),e.getMonth(),e.getDate()],$=e=>u(new Date(e)),S=N(),f=(e,...t)=>u(S(e,...t)),I=function(e,{locale:t,timeZone:s}={}){[t,s]=[t||e.localeInfo?.l,s||e.localeInfo?.tz];let F=[`${t?`l:${t}`:""}`,`${s?`tz:${s}`:""}`].filter(b=>b).join(", ");return e.localeInfo={...t?{l:t}:{},...s?{tz:s}:{},formats:F},e.localeInfo},H=function(e,t,s){return e=u(e),e.locale={locale:t,timeZone:s},e};return{...{clone:$,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(t-1)||e.getMonth()+1,date:(e,t)=>t&&i(e,t)||e.getDate(e),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>r(e,t),cloneDateTo:e=>t=>o(e,t),time:(e,t)=>t&&M(e,t)||n(e),timeStr:e=>(t=!1)=>g(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>(e=u(e),e.format("MM",`l:${e.locale?.l||"utc"}`)),weekDay:e=>(e=u(e),e.format("WD",`l:${e.locale?.l||"utc"}`)),self:e=>e,local:(e,t)=>D(e,t),locale:(e,t)=>y(e,t),removeLocale:e=>delete e.localeInfo,relocate:e=>({locale:t,timeZone:s}={})=>H(e,t,s),differenceFrom:e=>t=>d({start:e,end:t}),values:e=>t=>l(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>m(e.getFullYear(),e.getMonth()),isLeapYear:e=>m(e.getFullYear(),1)===29,format:e=>(...t)=>h(e,...t)},...{addYears:e=>(t=1)=>f(e,`${t} years`),addMonths:e=>(t=1)=>f(e,`${t} months`),addWeeks:e=>(t=1)=>f(e,`${t*7} days`),addDays:e=>(t=1)=>f(e,`${t} days`),nextYear:e=>f(e,"1 year"),nextWeek:e=>f(e,"7 days"),previousWeek:e=>f(e,"subtract, 7 days"),previousYear:e=>f(e,"subtract, 1 year"),nextMonth:e=>f(e,"1 month"),previousMonth:e=>f(e,"subtract, 1 month"),tomorrow:e=>f(e,"1 day"),yesterday:e=>f(e,"subtract, 1 day"),add:e=>(...t)=>f(e,...t),subtract:e=>(...t)=>f(e,...["subtract"].concat([t]).flat())}}}var Q=P();function P(){let u=j(l),p={get:(o,r)=>!o[r]&&u[r]?.(o)||y(o,r),set:(o,r,c)=>u[r]?.(o,c)||o[r]};function l(o){return new Proxy(o,p)}function y(o,r){return r in o&&o[r]instanceof Function?o[r].bind(o):o[r]}return function(o,r){let c=o?.locale||o?.timeZone,D=(o||"")instanceof Date,h=c?new Date:new Date(D?o:Date.parse(o)),i=isNaN(h)?new Date(Date.now()):h,d=l(i);return(c||r)&&(d.locale=c?o:r),d}}export{P as DateXFactory,Q as default};
