var Z=W;function W(){let u=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((l,[y,r])=>({...l,[y]:r,[`${y}s`]:r}),{}),p=function(...l){if(l.length<1)return[];let y;l[0].startsWith("subtract")&&(y=!0,l[0].startsWith("subtract")&&l.length===1&&(l=l[0].split(",")),l=l.slice(1));let r=l.length===1?l[0]?.split(/,/):l;return r&&r.length&&(l=r.map(s=>s.trim())),l.map(function(s){return s.toLowerCase().split(/\s/).map(c=>(c=c.trim(),+c?y?-c:+c:c))})};return function(l,...y){let r=p(...y);return r.length&&r.forEach(([s,c])=>{c=u[c],+s&&c&&l[`set${c}`](l[`get${c}`]()+ +s)}),l}}var z=U;function U(){let u=(y,r)=>{let s=isNaN(y),c=isNaN(r);if(s&&!c){let[M,D,i]=Array(3).fill("start- and/or end date are not valid");return{error:!0,message:M,full:D,clean:i}}if(c){let[M,D,i]=Array(3).fill("end date not valid");return{error:!0,message:M,full:D,clean:i}}if(s){let[M,D,i]=Array(3).fill("start date not valid");return{error:!0,message:M,full:D,clean:i}}return{error:!1}},p=l();return function({start:r,end:s}={}){let c=new Date(Date.parse(r)),M=new Date(Date.parse(s)),D=u(c,M);if(D.error)return D;let i=new Date(r),g=new Date(s),o=Math.abs(g-i),a=new Date(o),h=a.getUTCFullYear()-1970,F=a.getUTCMonth(),d=a.getUTCDate()-1,Y=a.getUTCHours(),b=a.getUTCMinutes(),$=a.getUTCSeconds(),f=a.getUTCMilliseconds(),I={years:h,months:F,days:d,hours:Y,minutes:b,seconds:$,milliseconds:f};return I.full=p({values:I,full:!0}),I.clean=p({values:I}),I};function l(){let y=(...i)=>g=>i.reduce((o,a)=>a(o),g),r=(i,g)=>i===1?g.slice(0,-1):g;return y(({values:i,full:g})=>[Object.entries(i).filter(([o])=>/^(years|month|days|hours|minutes|seconds)/i.test(o)),g],([i,g])=>g?i:i.filter(([,o])=>g?+o:o>0),i=>i.reduce((g,[o,a])=>[...g,`${a} ${r(a,o)}`],[]),i=>i.length<1?"Dates are equal":`${i.slice(0,-1).join(", ")}${i.length>1?" and ":""}${i.slice(-1).shift()}`)}}var _=N();function N(){let[u,p,l,y]=["2-digit","numeric","long","short"],r={fixed:{MM:{month:l},M:{month:y},m:{month:p},mm:{month:u},yyyy:{year:p},yy:{year:u},WD:{weekday:l},wd:{weekday:y},d:{day:p},dd:{day:u},h:{hour:p},hh:{hour:u},mi:{minute:p},mmi:{minute:u},s:{second:p},ss:{second:u},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:o=>({timeZoneName:o.slice(4)}),hrc:o=>({hourCycle:`h${o.slice(4)}`}),ds:o=>({dateStyle:o.slice(3)}),ts:o=>({timeStyle:o.slice(3)}),tz:o=>({timeZone:o.slice(3)}),e:o=>({era:o.slice(2)}),l:o=>({locale:o.slice(2)})}},s={...r,retrieveDyn(o){let a=o?.slice(0,o.indexOf(":"));return r.dynamic[a]&&r.dynamic[a](o)},get re(){return new RegExp(`\\b(${Object.keys(r.fixed).join("|")})\\b`,"g")}},c=(o="dtf",a=0)=>{let h=` ${o.replace(/(?<=\{)(.+?)(?=})/g,d=>`[${a++}]`).replace(/[{}]/g,"").trim()} `,F=o.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return F},formatString(d){h=d},set formatStr(d){h=d},get formatStr(){return h},get units(){return h.match(s.re)||[]},finalize(d="",Y="",b="",$=""){return h.replace(/~([\d+]?)/g,"$1").replace(/dtf/,d).replace(/era/,b).replace(/dp\b|~dp\b/,Y).replace(/yn\b/,$).replace(/\[(\d+?)]/g,(f,I)=>F[I].trim()).trim()}}},M=o=>o.replace(/\s+/g,""),D=(...o)=>o?.reduce((a,h)=>({...a,...s.retrieveDyn(h)||s.fixed[h]}),s.fixed.dl),i=(o,a,h)=>{let F=D(...M(h).split(",")),d=Intl.DateTimeFormat(F.locale,F).format(o);return a.finalize(d)},g=(o,a,h)=>{let F=D(...a.units.concat(M(h).split(",")).flat()),d={...s.fixed},Y=($,f)=>F[$]==="numeric"&&f.startsWith("0")?f.slice(1):f,b=Intl.DateTimeFormat(F.locale,F).formatToParts(o).reduce(($,f)=>f.type==="literal"?$:{...$,[f.type]:Y(f.type,f.value)},{});return d.ms=F.fractionalSecondDigits?d.msp:d.ms,d.yyyy=b.relatedYear?d.ry:d.yyyy,a.formatStr=a.formatStr.replace(s.re,$=>b[Object.keys(d[$]).shift()]||$),a.finalize(void 0,b.dayPeriod,b.era,b.yearName)};return(o,a,h="l:default")=>/ds:|ts:/.test(h)?i(o,c(void 0),h):g(o,c(a||void 0),h)}var x=k;function k(u){let p=N(),l=(e,t)=>{let n={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(n):n},y=(e,{locale:t,timeZone:n}={})=>((t||n)&&(e.localeInfo=I(e,{locale:t,timeZone:n})),e.localeInfo),r=(e,t)=>{t=u(t??new Date);let n=u(e);if(t){let{year:m,month:S,date:T}=n;t.date={year:m,month:S,date:T},n.locale&&(t.locale={locale:n.locale.locale,timeZone:n.locale.timeZone})}return t},s=(e,t)=>{t=u(t??new Date);let n=u(e),{hour:m,minutes:S,seconds:T,ms:C}=n;return t.time={hour:m,minutes:S,seconds:T,milliseconds:C},n.locale&&(t.locale={locale:n.locale.locale,timeZone:n.locale.timeZone}),t},c=function(e){let n=j(e)?.replace(/l:/,"locale: ").replace(/tz:/,"timeZone: ");return e.toLocaleString()+` !!invalid locale info => ${n}`},M=e=>{e=u(e);let t={};if(!e.locale)return e.toLocaleString();e.locale?.timeZone&&(t={timeZone:e.locale.timeZone});try{return e.toLocaleString(e.locale?.locale,t)}catch{return c(e)}},D=(e,...t)=>{e=u(e);let[n,m]=[e.locale,e.timeZone],S=j(e);try{return t.length===1?p(e,t[0],S):t.length?p(e,...t):e.toLocaleString(n,m?{timeZone:m}:void 0)}catch{return c(u(e))}},i=(e,{year:t,month:n,date:m}={})=>{if(t||n||m){let[S,T,C]=a(e);return e.setFullYear(t||S),e.setMonth((n||T+1)-1),e.setDate(m||C),!0}return e.getDate()},g=z(),o=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],a=e=>[e.getFullYear(),e.getMonth(),e.getDate()],h=(e,t)=>{let n=o(e),m=t?`.${n.pop()}`.padStart(3,"0"):"";return`${n.slice(0,3).map(S=>`${S}`.padStart(2,"0")).join(":")}${m}`},F=function(e,{hour:t,minutes:n,seconds:m,milliseconds:S}={}){if(t||n||m||S){let[T,C,A,L]=o(e);return e.setHours(t??T),e.setMinutes(n??C),e.setSeconds(m??A),e.setMilliseconds(S??L),!0}return o(e)},d=(e,t)=>u(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),Y=e=>[e.getFullYear(),e.getMonth(),e.getDate()],b=e=>u(new Date(e)),$=Z(),f=(e,...t)=>u($(e,...t)),I=function(e,{locale:t,timeZone:n}={}){[t,n]=[t||e.localeInfo?.locale,n||e.localeInfo?.timeZone];let m=[`${t?`l:${t}`:""}`,`${n?`tz:${n}`:""}`].filter(S=>S).join(", ");return e.localeInfo={formats:m,...t?{locale:t}:{},...n?{timeZone:n}:{}},e.localeInfo},j=e=>{e=u(e);let[t,n]=[e.localeInfo?.locale,e.localeInfo?.timeZone];return[`${t?`l:${t}`:""}`,`${n?`tz:${n}`:""}`].filter(m=>m).join(", ")},H=e=>{e=u(e),delete e.localeInfo},w=function(e,t,n){return e=u(e),e.locale={locale:t,timeZone:n},e},O=function(e,t){return e=u(e),e.format(t?"MM":"WD",`l:${e.locale?.locale||"utc"}`)};return Object.freeze({clone:b,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(v-1)||e.getMonth()+1,date:(e,{year:t,month:n,date:m}={})=>i(e,{year:t,month:n,date:m}),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>s(e,t),cloneDateTo:e=>t=>r(e,t),time:(e,{hour:t,minutes:n,seconds:m,milliseconds:S}={})=>F(e,{hour:t,minutes:n,seconds:m,milliseconds:S}),timeStr:e=>(t=!1)=>h(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>O(e,!0),weekDay:e=>O(e),self:e=>e,local:e=>M(e),locale:(e,{locale:t,timeZone:n}={})=>y(e,{locale:t,timeZone:n}),removeLocale:e=>()=>H(e),relocate:e=>({locale:t,timeZone:n}={})=>w(e,t,n),differenceFrom:e=>t=>g({start:e,end:t}),values:e=>t=>l(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>d(e.getFullYear(),e.getMonth()),isLeapYear:e=>d(e.getFullYear(),1)===29,format:e=>(...t)=>D(e,...t),addYears:e=>(t=1)=>f(e,`${t} years`),addMonths:e=>(t=1)=>f(e,`${t} months`),addWeeks:e=>(t=1)=>f(e,`${t*7} days`),addDays:e=>(t=1)=>f(e,`${t} days`),nextYear:e=>f(e,"1 year"),nextWeek:e=>f(e,"7 days"),previousWeek:e=>f(e,"subtract, 7 days"),previousYear:e=>f(e,"subtract, 1 year"),nextMonth:e=>f(e,"1 month"),previousMonth:e=>f(e,"subtract, 1 month"),tomorrow:e=>f(e,"1 day"),yesterday:e=>f(e,"subtract, 1 day"),add:e=>(...t)=>f(e,...t),subtract:e=>(...t)=>f(e,...["subtract"].concat([t]).flat())})}var V=E();function E(){let u=x(l),p={get:(r,s)=>!r[s]&&u[s]?.(r)||y(r,s),set:(r,s,c)=>u[s]?.(r,c)||r[s]};function l(r){return new Proxy(r,p)}function y(r,s){return s in r&&r[s]instanceof Function?r[s].bind(r):r[s]}return function(r,s){let c=r?.locale||r?.timeZone,M=(r||"")instanceof Date,D=c?new Date:new Date(M?r:Date.parse(r)),i=isNaN(D)?new Date(Date.now()):D,g=l(i);return(c||s)&&(g.locale=c?r:s),g}}export{E as DateXFactory,V as default};
