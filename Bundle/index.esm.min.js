var C=P;function P(){let u=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((c,[o,r])=>({...c,[o]:r,[`${o}s`]:r}),{}),h=function(...c){if(c.length<1)return[];let o;(c[0]==="subtract"||c[0].startsWith("subtract"))&&(o=!0,c[0].startsWith("subtract")&&c.length===1&&(c=c[0].split(",")),c=c.slice(1));let r=c.length===1?c[0]?.split(/,/):c;return r&&r.length&&(c=r.map(m=>m.trim())),c.map(function(m){return m.toLowerCase().split(/\s/).map(i=>(i=i.trim(),+i?o?-i:+i:i))})};return function(c,...o){let r=h(...o);return r.length&&r.forEach(([m,i])=>{i=u[i],+m&&i&&c[`set${i}`](c[`get${i}`]()+ +m)}),c}}var N=O;function O(){let u=(c,o)=>{let r=isNaN(c),m=isNaN(o);if(r&&!m){let[i,D,l]=Array(3).fill("start and end date are not valid");return{error:!0,message:i,full:D,clean:l}}if(m){let[i,D,l]=Array(3).fill("end date not valid");return{error:!0,message:i,full:D,clean:l}}if(r){let[i,D,l]=Array(3).fill("start date not valid");return{error:!0,message:i,full:D,clean:l}}return{error:!1}},h=I();return function({start:o,end:r}={}){let m=new Date(Date.parse(o)),i=new Date(Date.parse(r)),D=u(m,i);if(D.error)return D;let l=new Date(o),d=new Date(r),n=Math.abs(d-l),a=new Date(n),g=a.getUTCFullYear()-1970,p=a.getUTCMonth(),y=a.getUTCDate()-1,z=a.getUTCHours(),F=a.getUTCMinutes(),f=a.getUTCSeconds(),S=a.getUTCMilliseconds(),T={years:g,months:p,days:y,hours:z,minutes:F,seconds:f,milliseconds:S};return T.full=h({values:T,full:!0}),T.clean=h({values:T}),T};function I(){let c=(...l)=>d=>l.reduce((n,a)=>a(n),d),o=(l,d)=>l===1?d.slice(0,-1):d;return c(({values:l,full:d})=>[Object.entries(l).filter(([n])=>/^(years|month|days|hours|minutes|seconds)/i.test(n)),d],([l,d])=>d?l:l.filter(([,n])=>d?+n:n>0),l=>l.reduce((d,[n,a])=>[...d,`${a} ${o(a,n)}`],[]),l=>l.length<1?"Dates are equal":`${l.slice(0,-1).join(", ")}${l.length>1?" and ":""}${l.slice(-1).shift()}`)}}var k=A();function A(){let[u,h,I,c]=["2-digit","numeric","long","short"],o={fixed:{MM:{month:I},M:{month:c},m:{month:h},mm:{month:u},yyyy:{year:h},yy:{year:u},WD:{weekday:I},wd:{weekday:c},d:{day:h},dd:{day:u},h:{hour:h},hh:{hour:u},mi:{minute:h},mmi:{minute:u},s:{second:h},ss:{second:u},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:n=>({timeZoneName:n.slice(4)}),hrc:n=>({hourCycle:`h${n.slice(4)}`}),ds:n=>({dateStyle:n.slice(3)}),ts:n=>({timeStyle:n.slice(3)}),tz:n=>({timeZone:n.slice(3)}),e:n=>({era:n.slice(2)}),l:n=>({locale:n.slice(2)})}},r={...o,retrieveDyn(n){let a=n?.slice(0,n.indexOf(":"));return o.dynamic[a]&&o.dynamic[a](n)},get re(){return new RegExp(`\\b(${Object.keys(o.fixed).join("|")})\\b`,"g")}},m=(n="dtf",a=0)=>{let g=` ${n.replace(/(?<=\{)(.+?)(?=})/g,y=>`[${a++}]`).replace(/[{}]/g,"").trim()} `,p=n.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return p},formatString(y){g=y},set formatStr(y){g=y},get formatStr(){return g},get units(){return g.match(r.re)||[]},finalize(y="",z="",F="",f=""){return g.replace(/~([\d+]?)/g,"$1").replace(/dtf/,y).replace(/era/,F).replace(/dp\b|~dp\b/,z).replace(/yn\b/,f).replace(/\[(\d+?)]/g,(S,T)=>p[T].trim()).trim()}}},i=n=>n.replace(/\s+/g,""),D=(...n)=>n?.reduce((a,g)=>({...a,...r.retrieveDyn(g)||r.fixed[g]}),r.fixed.dl),l=(n,a,g)=>{let p=D(...i(g).split(",")),y=Intl.DateTimeFormat(p.locale,p).format(n);return a.finalize(y)},d=(n,a,g)=>{let p=D(...a.units.concat(i(g).split(",")).flat()),y={...r.fixed},z=(f,S)=>p[f]==="numeric"&&S.startsWith("0")?S.slice(1):S,F=Intl.DateTimeFormat(p.locale,p).formatToParts(n).reduce((f,S)=>S.type==="literal"?f:{...f,[S.type]:z(S.type,S.value)},{});return y.ms=p.fractionalSecondDigits?y.msp:y.ms,y.yyyy=F.relatedYear?y.ry:y.yyyy,a.formatStr=a.formatStr.replace(r.re,f=>F[Object.keys(y[f]).shift()]||f),a.finalize(void 0,F.dayPeriod,F.era,F.yearName)};return(n,a,g="l:default")=>/ds:|ts:/.test(g)?l(n,m(void 0),g):d(n,m(a||void 0),g)}var x=H;function H(u){let h=A(),I=(e,t)=>{let s={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(s):s},c=(e,t)=>(t&&(e.localeInfo=S(e,t)),e.localeInfo),o=(e,t)=>{t=u(t??new Date);let s=u(e);if(t){let{year:$,month:M,date:b}=s;t.date={year:$,month:M,date:b},s.locale&&(t.locale={locale:s.locale.l,timeZone:s.locale.tz})}return t},r=(e,t)=>{t=u(t??new Date);let s=u(e),{hour:$,minutes:M,seconds:b,ms:Y}=s;return t.time={hour:$,minutes:M,seconds:b,milliseconds:Y},s.locale&&(t.locale={locale:s.locale.l,timeZone:s.locale.tz}),t},m=(e,t)=>{if(e=u(e),!e.locale)return e.toLocaleString();e.locale?.tz&&(t={...t??{},timeZone:e.locale.tz});try{return e.toLocaleString(e.locale.l,t)}catch{let{l:$,tz:M}=e.locale??{l:void 0,tz:void 0},b=[`locale: "${$??"none"}"`,`timeZone: "${M??"none"}"`].join(", ");return e.toLocaleString()+` !!INVALID LOCALE DATA (${b})!!`}},i=(e,...t)=>{let s=u(e).locale;try{return t.length===1?h(e,t[0],s?.formats):t.length?h(e,...t):e.toLocaleString(s?.l)}catch{let{l:M,tz:b}=s??{l:void 0,tz:void 0},Y=[`locale: ${M??"none"}`,`timeZone: ${b??"none"}`].join(", ");return h(e,t[0]+` {!!INVALID LOCALE DATA (${Y})}!!`,void 0)}},D=(e,{year:t,month:s,date:$}={})=>{let[M,b,Y]=n(e);e.setFullYear(t||M),e.setMonth((s||b+1)-1),e.setDate($||Y)},l=N(),d=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=e=>[e.getFullYear(),e.getMonth(),e.getDate()],a=(e,t)=>{let s=d(e),$=t?`.${s.pop()}`.padStart(3,"0"):"";return`${s.slice(0,3).map(M=>`${M}`.padStart(2,"0")).join(":")}${$}`},g=function(e,{hour:t,minutes:s,seconds:$,milliseconds:M}={}){let[b,Y,L,j]=d(e);e.setHours(t??b),e.setMinutes(s??Y),e.setSeconds($??L),e.setMilliseconds(M??j)},p=(e,t)=>u(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),y=e=>[e.getFullYear(),e.getMonth(),e.getDate()],z=e=>u(new Date(e)),F=C(),f=(e,...t)=>u(F(e,...t)),S=function(e,{locale:t,timeZone:s}={}){let $=t||e.localeInfo?.l||"utc",M=s=s||e.localeInfo?.tz||"Etc/UTC";return e.localeInfo={l:t,tz:s,formats:`l:${t},tz:${s}`},e.localeInfo},T=function(e,t,s){return e=u(e),e.locale={locale:t,timeZone:s},e};return{...{clone:z,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(t-1)||e.getMonth()+1,date:(e,t)=>t&&D(e,t)||e.getDate(e),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>r(e,t),cloneDateTo:e=>t=>o(e,t),time:(e,t)=>t&&g(e,t)||d(e),timeStr:e=>(t=!1)=>a(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>(e=u(e),e.format("MM",`l:${e.locale?.l||"utc"}`)),weekDay:e=>(e=u(e),e.format("WD",`l:${e.locale?.l||"utc"}`)),self:e=>e,local:(e,t)=>m(e,t),locale:(e,t)=>c(e,t),relocate:e=>({locale:t,timeZone:s}={})=>T(e,t,s),differenceFrom:e=>t=>l({start:e,end:t}),values:e=>t=>I(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>p(e.getFullYear(),e.getMonth()),isLeapYear:e=>p(e.getFullYear(),1)===29,format:e=>(...t)=>i(e,...t)},...{addYears:e=>(t=1)=>f(e,`${t} years`),addMonths:e=>(t=1)=>f(e,`${t} months`),addWeeks:e=>(t=1)=>f(e,`${t*7} days`),addDays:e=>(t=1)=>f(e,`${t} days`),nextYear:e=>f(e,"1 year"),nextWeek:e=>f(e,"7 days"),previousWeek:e=>f(e,"subtract, 7 days"),previousYear:e=>f(e,"subtract, 1 year"),nextMonth:e=>f(e,"1 month"),previousMonth:e=>f(e,"subtract, 1 month"),tomorrow:e=>f(e,"1 day"),yesterday:e=>f(e,"subtract, 1 day"),add:e=>(...t)=>f(e,...t),subtract:e=>(...t)=>f(e,...["subtract"].concat([t]).flat())}}}var K=E();function E(){let u=x(I),h={get:(o,r)=>!o[r]&&u[r]?.(o)||c(o,r),set:(o,r,m)=>u[r]?.(o,m)||o[r]};function I(o){return new Proxy(o,h)}function c(o,r){return r in o&&o[r]instanceof Function?o[r].bind(o):o[r]}return function(o,r){let m=o?.locale||o?.timeZone,i=(o||"")instanceof Date,D=m?new Date:new Date(i?o:Date.parse(o)),l=isNaN(D)?new Date(Date.now()):D,d=I(l);return(m||r)&&(d.locale=m?o:r),d}}export{E as DateXFactory,K as default};
