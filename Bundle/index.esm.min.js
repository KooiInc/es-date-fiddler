var N=P;function P(){let u=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((r,[o,s])=>({...r,[o]:s,[`${o}s`]:s}),{}),h=function(...r){if(r.length<1)return[];let o;(r[0]==="subtract"||r[0].startsWith("subtract"))&&(o=!0,r[0].startsWith("subtract")&&r.length===1&&(r=r[0].split(",")),r=r.slice(1));let s=r.length===1?r[0]?.split(/,/):r;return s&&s.length&&(r=s.map(m=>m.trim())),r.map(function(m){return m.toLowerCase().split(/\s/).map(l=>(l=l.trim(),+l?o?-l:+l:l))})};return function(r,...o){let s=h(...o);return s.length&&s.forEach(([m,l])=>{l=u[l],+m&&l&&r[`set${l}`](r[`get${l}`]()+ +m)}),r}}var z=W;function W(){let u=(r,o)=>{let s=isNaN(r),m=isNaN(o);if(s&&!m){let[l,p,c]=Array(3).fill("start and end date are not valid");return{error:!0,message:l,full:p,clean:c}}if(m){let[l,p,c]=Array(3).fill("end date not valid");return{error:!0,message:l,full:p,clean:c}}if(s){let[l,p,c]=Array(3).fill("start date not valid");return{error:!0,message:l,full:p,clean:c}}return{error:!1}},h=F();return function({start:o,end:s}={}){let m=new Date(Date.parse(o)),l=new Date(Date.parse(s)),p=u(m,l);if(p.error)return p;let c=new Date(o),g=new Date(s),n=Math.abs(g-c),a=new Date(n),d=a.getUTCFullYear()-1970,D=a.getUTCMonth(),y=a.getUTCDate()-1,Y=a.getUTCHours(),S=a.getUTCMinutes(),i=a.getUTCSeconds(),M=a.getUTCMilliseconds(),T={years:d,months:D,days:y,hours:Y,minutes:S,seconds:i,milliseconds:M};return T.full=h({values:T,full:!0}),T.clean=h({values:T}),T};function F(){let r=(...c)=>g=>c.reduce((n,a)=>a(n),g),o=(c,g)=>c===1?g.slice(0,-1):g;return r(({values:c,full:g})=>[Object.entries(c).filter(([n])=>/^(years|month|days|hours|minutes|seconds)/i.test(n)),g],([c,g])=>g?c:c.filter(([,n])=>g?+n:n>0),c=>c.reduce((g,[n,a])=>[...g,`${a} ${o(a,n)}`],[]),c=>c.length<1?"Dates are equal":`${c.slice(0,-1).join(", ")}${c.length>1?" and ":""}${c.slice(-1).shift()}`)}}var Z=I();function I(){let[u,h,F,r]=["2-digit","numeric","long","short"],o={fixed:{MM:{month:F},M:{month:r},m:{month:h},mm:{month:u},yyyy:{year:h},yy:{year:u},WD:{weekday:F},wd:{weekday:r},d:{day:h},dd:{day:u},h:{hour:h},hh:{hour:u},mi:{minute:h},mmi:{minute:u},s:{second:h},ss:{second:u},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:n=>({timeZoneName:n.slice(4)}),hrc:n=>({hourCycle:`h${n.slice(4)}`}),ds:n=>({dateStyle:n.slice(3)}),ts:n=>({timeStyle:n.slice(3)}),tz:n=>({timeZone:n.slice(3)}),e:n=>({era:n.slice(2)}),l:n=>({locale:n.slice(2)})}},s={...o,retrieveDyn(n){let a=n?.slice(0,n.indexOf(":"));return o.dynamic[a]&&o.dynamic[a](n)},get re(){return new RegExp(`\\b(${Object.keys(o.fixed).join("|")})\\b`,"g")}},m=(n="dtf",a=0)=>{let d=` ${n.replace(/(?<=\{)(.+?)(?=})/g,y=>`[${a++}]`).replace(/[{}]/g,"").trim()} `,D=n.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return D},formatString(y){d=y},set formatStr(y){d=y},get formatStr(){return d},get units(){return d.match(s.re)||[]},finalize(y="",Y="",S="",i=""){return d.replace(/~([\d+]?)/g,"$1").replace(/dtf/,y).replace(/era/,S).replace(/dp\b|~dp\b/,Y).replace(/yn\b/,i).replace(/\[(\d+?)]/g,(M,T)=>D[T].trim()).trim()}}},l=n=>n.replace(/\s+/g,""),p=(...n)=>n?.reduce((a,d)=>({...a,...s.retrieveDyn(d)||s.fixed[d]}),s.fixed.dl),c=(n,a,d)=>{let D=p(...l(d).split(",")),y=Intl.DateTimeFormat(D.locale,D).format(n);return a.finalize(y)},g=(n,a,d)=>{let D=p(...a.units.concat(l(d).split(",")).flat()),y={...s.fixed},Y=(i,M)=>D[i]==="numeric"&&M.startsWith("0")?M.slice(1):M,S=Intl.DateTimeFormat(D.locale,D).formatToParts(n).reduce((i,M)=>M.type==="literal"?i:{...i,[M.type]:Y(M.type,M.value)},{});return y.ms=D.fractionalSecondDigits?y.msp:y.ms,y.yyyy=S.relatedYear?y.ry:y.yyyy,a.formatStr=a.formatStr.replace(s.re,i=>S[Object.keys(y[i]).shift()]||i),a.finalize(void 0,S.dayPeriod,S.era,S.yearName)};return(n,a,d="l:default")=>/ds:|ts:/.test(d)?c(n,m(void 0),d):g(n,m(a||void 0),d)}var O=w;function w(u){let h=I(),F=(e,t)=>{let f={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(f):f},r=(e,t)=>(t&&(e.localeInfo=M(e,t)),e.localeInfo),o=(e,t)=>{t=u(t??new Date);let f=u(e);if(t){let{year:b,month:$,date:x}=f;t.date={year:b,month:$,date:x},f.locale&&(t.locale={locale:f.locale.l,timeZone:f.locale.tz})}return t},s=(e,t)=>{t=u(t??new Date);let f=u(e),{hour:b,minutes:$,seconds:x,ms:C}=f;return t.time={hour:b,minutes:$,seconds:x,milliseconds:C},f.locale&&(t.locale={locale:f.locale.l,timeZone:f.locale.tz}),t},m=(e,t)=>(e=u(e),e.locale?(e.locale?.tz&&(t={...t??{},timeZone:e.locale.tz}),e.toLocaleString(e.locale.l,t)):e.toLocaleString()),l=(e,...t)=>{let f=u(e).locale;return t.length===1?h(e,t[0],f?.formats):t.length?h(e,...t):e.toLocaleString(f?.l)},p=(e,{year:t,month:f,date:b}={})=>{let[$,x,C]=n(e);e.setFullYear(t||$),e.setMonth((f||x+1)-1),e.setDate(b||C)},c=z(),g=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],n=e=>[e.getFullYear(),e.getMonth(),e.getDate()],a=(e,t)=>{let f=g(e),b=t?`.${f.pop()}`.padStart(3,"0"):"";return`${f.slice(0,3).map($=>`${$}`.padStart(2,"0")).join(":")}${b}`},d=function(e,{hour:t,minutes:f,seconds:b,milliseconds:$}={}){let[x,C,j,H]=g(e);e.setHours(t??x),e.setMinutes(f??C),e.setSeconds(b??j),e.setMilliseconds($??H)},D=(e,t)=>u(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),y=e=>[e.getFullYear(),e.getMonth(),e.getDate()],Y=e=>u(new Date(e)),S=N(),i=(e,...t)=>u(S(e,...t)),M=function(e,{locale:t="utc",timeZone:f="Etc/UTC"}={}){return e.localeInfo={l:t,tz:f,formats:`l:${t},tz:${f}`},e.localeInfo};return{...{clone:Y,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(t-1)||e.getMonth()+1,date:(e,t)=>t&&p(e,t)||e.getDate(e),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>s(e,t),cloneDateTo:e=>t=>o(e,t),time:(e,t)=>t&&d(e,t)||g(e),timeStr:e=>(t=!1)=>a(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>(e=u(e),e.format("MM",`l:${e.locale?.l||"utc"}`)),weekDay:e=>(e=u(e),e.format("WD",`l:${e.locale?.l||"utc"}`)),self:e=>e,local:(e,t)=>m(e,t),locale:(e,t)=>r(e,t),differenceFrom:e=>t=>c({start:e,end:t}),values:e=>t=>F(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>D(e.getFullYear(),e.getMonth()),isLeapYear:e=>D(e.getFullYear(),1)===29,format:e=>(...t)=>l(e,...t)},...{addYears:e=>(t=1)=>i(e,`${t} years`),addMonths:e=>(t=1)=>i(e,`${t} months`),addWeeks:e=>(t=1)=>i(e,`${t*7} days`),addDays:e=>(t=1)=>i(e,`${t} days`),nextYear:e=>i(e,"1 year"),nextWeek:e=>i(e,"7 days"),previousWeek:e=>i(e,"subtract, 7 days"),previousYear:e=>i(e,"subtract, 1 year"),nextMonth:e=>i(e,"1 month"),previousMonth:e=>i(e,"subtract, 1 month"),tomorrow:e=>i(e,"1 day"),yesterday:e=>i(e,"subtract, 1 day"),add:e=>(...t)=>i(e,...t),subtract:e=>(...t)=>i(e,...["subtract"].concat([t]).flat())}}}var J=A();function A(){let u=O(F),h={get:(o,s)=>!o[s]&&u[s]?.(o)||r(o,s),set:(o,s,m)=>u[s]?.(o,m)||o[s]};function F(o){return new Proxy(o,h)}function r(o,s){return s in o&&o[s]instanceof Function?o[s].bind(o):o[s]}return function(o,s){let m=o?.locale||o?.timeZone,l=m?new Date:new Date(o),p=isNaN(l)?new Date(Date.now()):l,c=F(p);return(m||s)&&(c.locale=m?o:s),c}}export{A as DateXFactory,J as default};
