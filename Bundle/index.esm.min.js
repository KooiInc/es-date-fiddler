var H=ne;function ne(){let a=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((g,[D,h])=>({...g,[D]:h,[`${D}s`]:h}),{}),F=function(...g){if(g.length<1)return[];let D;g[0].startsWith("subtract")&&(D=!0,g[0].startsWith("subtract")&&g.length===1&&(g=g[0].split(",")),g=g.slice(1));let h=g.length===1?g[0]?.split(/,/):g;return h&&h.length&&(g=h.map(y=>y.trim())),g.map(function(y){return y.toLowerCase().split(/\s/).map(l=>(l=l.trim(),parseInt(l)?D?-l:+l:l))})};return function(g,...D){let h=F(...D);return h.length&&h.forEach(([y,l])=>{l=a[l],+y&&l&&g[`set${l}`](g[`get${l}`]()+ +y)}),g}}var L=oe;function oe(){let a=(D,h)=>{let y=isNaN(D),l=isNaN(h);if(y&&!l){let[S,p,n]=Array(3).fill("start- and/or end date are not valid");return{error:!0,message:S,full:p,clean:n}}if(l){let[S,p,n]=Array(3).fill("end date not valid");return{error:!0,message:S,full:p,clean:n}}if(y){let[S,p,n]=Array(3).fill("start date not valid");return{error:!0,message:S,full:p,clean:n}}return{error:!1}},F=g();return function({start:h,end:y}={}){let l=new Date(Date.parse(h)),S=new Date(Date.parse(y)),p=a(l,S);if(p.error)return p;let n=new Date(h),s=new Date(y),o=Math.abs(s-n),c=new Date(o),i=c.getUTCFullYear()-1970,f=c.getUTCMonth(),u=c.getUTCDate()-1,N=c.getUTCHours(),T=c.getUTCMinutes(),$=c.getUTCSeconds(),I=c.getUTCMilliseconds(),Z={from:n,to:s,years:i,months:f,days:u,hours:N,minutes:T,seconds:$,milliseconds:I};return Z.full=F({values:Z,full:!0}),Z.clean=F({values:Z}),Z};function g(){let D=(...n)=>s=>n.reduce((o,c)=>c(o),s),h=(n,s)=>n===1?s.slice(0,-1):s;return D(({values:n,full:s})=>[Object.entries(n).filter(([o])=>/^(years|month|days|hours|minutes|seconds)/i.test(o)),s],([n,s])=>s?n:n.filter(([,o])=>s?+o:o>0),n=>n.reduce((s,[o,c])=>[...s,`${c} ${h(c,o)}`],[]),n=>n.length<1?"Dates are equal":`${n.slice(0,-1).join(", ")}${n.length>1?" and ":""}${n.slice(-1).shift()}`)}}var ue=Y();function Y(){let[a,F,g,D]=["2-digit","numeric","long","short"],h={fixed:{MM:{month:g},M:{month:D},m:{month:F},mm:{month:a},yyyy:{year:F},yy:{year:a},WD:{weekday:g},wd:{weekday:D},d:{day:F},dd:{day:a},h:{hour:F},hh:{hour:a},mi:{minute:F},mmi:{minute:a},s:{second:F},ss:{second:a},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:o=>({timeZoneName:o.slice(4)}),hrc:o=>({hourCycle:`h${o.slice(4)}`}),ds:o=>({dateStyle:o.slice(3)}),ts:o=>({timeStyle:o.slice(3)}),tz:o=>({timeZone:o.slice(3)}),e:o=>({era:o.slice(2)}),l:o=>({locale:o.slice(2)})}},y={...h,retrieveDyn(o){let c=o?.slice(0,o.indexOf(":"));return h.dynamic[c]&&h.dynamic[c](o)},get re(){return new RegExp(`\\b(${Object.keys(h.fixed).join("|")})\\b`,"g")}},l=(o="dtf",c=0)=>{let i=` ${o.replace(/(?<=\{)(.+?)(?=})/g,u=>`[${c++}]`).replace(/[{}]/g,"").trim()} `,f=o.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return f},formatString(u){i=u},set formatStr(u){i=u},get formatStr(){return i},get units(){return i.match(y.re)||[]},finalize(u="",N="",T="",$=""){return i.replace(/~([\d+]?)/g,"$1").replace(/dtf/,u).replace(/era/,T).replace(/dp\b|~dp\b/,N).replace(/yn\b/,$).replace(/\[(\d+?)]/g,(I,Z)=>f[Z].trim()).trim()}}},S=o=>o.replace(/\s+/g,""),p=(...o)=>o?.reduce((c,i)=>({...c,...y.retrieveDyn(i)||y.fixed[i]}),y.fixed.dl),n=(o,c,i)=>{let f=p(...S(i).split(",")),u=Intl.DateTimeFormat(f.locale,f).format(o);return c.finalize(u)},s=(o,c,i)=>{let f=p(...c.units.concat(S(i).split(",")).flat()),u={...y.fixed},N=($,I)=>f[$]==="numeric"&&I.startsWith("0")?I.slice(1):I,T=Intl.DateTimeFormat(f.locale,f).formatToParts(o).reduce(($,I)=>I.type==="literal"?$:{...$,[I.type]:N(I.type,I.value)},{});return u.ms=f.fractionalSecondDigits?u.msp:u.ms,u.yyyy=T.relatedYear?u.ry:u.yyyy,c.formatStr=c.formatStr.replace(y.re,$=>T[Object.keys(u[$]).shift()]||$),c.finalize(void 0,T.dayPeriod,T.era,T.yearName)};return(o,c,i="l:default")=>/ds:|ts:/.test(i)?n(o,l(void 0),i):s(o,l(c||void 0),i)}var E=re;function re(a,F){let g=!0,D=Y(),h=e=>!(isNaN(parseInt(e))&&isNaN(+e)),y=e=>e?.constructor===Object,l=e=>+e.slice(e.indexOf("+")+1).replace(":","")||0,S=e=>e.localeInfo?.timeZone||Intl.DateTimeFormat().resolvedOptions().timeZone,p=(e,t=2)=>`${e}`.padStart(t,"0"),n=e=>e.map(t=>String(t)?.padStart(2,"0")??t),s=e=>n(z(e)).join("-"),o=e=>Object.entries(e).filter(([,t])=>h(t)),c=(e,t=!1)=>{e=a(e);let r=t?0:1,m={year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds(),monthZeroBased:t,monthName:e.monthName,weekDay:e.weekDay,locale:e.locale||"no locale (yet)"};return{get object(){return m},get array(){return[e.getFullYear(),e.getMonth()+r,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}}},i=e=>{let t={timeZone:S(e),hourCycle:"h23"},r;try{return a(new Date(new Date(e.toLocaleString("en",t))))}catch(m){return console.error(`Can't retrieve localized date/time value for ${t.timeZone}: ${m.message}`),a(e)}},f=e=>console.error(`clone${e?"Time":"Date"}To: no toDate given`),u=(e,t)=>{t=a(t??new Date);let r=a(e);if(t){let[m,M,w]=r.date;return t.date={year:m,month:M,date:w},r.locale&&(t.locale={locale:r.locale.locale,timeZone:r.locale.timeZone}),t}return f(),r},N=(e,t)=>{t=a(t??new Date);let r=a(e),{hour:m,minutes:M,seconds:w,ms:O}=r;return t.time={hour:m,minutes:M,seconds:w,ms:O},r.locale?(t.locale={locale:r.locale.locale,timeZone:r.locale.timeZone},t):(f(1),r)},T=e=>{e=a(e);let t={};if(!e.locale)return e.toLocaleString();let{locale:r,timeZone:m}=e.locale;return e.locale?.timeZone&&(t={timeZone:e.locale.timeZone}),e.toLocaleString(r,t)},$=(e,...t)=>{e=a(e);let r,m,M;return e.locale&&(r=e.locale.locale,m=e.locale.timeZone,M=e.formats),t.length===1?D(e,t[0],M):t.length?D(e,...t):e.toLocaleString(r||[],m?{timeZone:m}:void 0)},I=(e,t)=>y(t)&&o(t).forEach(([r,m])=>e[`set${r}`](m))&&!0||!1,Z=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()??0],z=e=>[e.getFullYear(),e.getMonth()+1,e.getDate()],U=(e,t)=>I(e,t)||Z(e),k=(e,t)=>I(e,t)||z(e),G=L(),A=(e,t)=>a(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),ae=e=>[e.getFullYear(),e.getMonth(),e.getDate()],X=e=>a(new Date(e)).relocate(e.localeInfo),_=H(),b=(e,...t)=>a(_(e,...t)),C=(e,t)=>[`${e&&!(Array.isArray(e)&&e.length<1)?`l:${e}`:""}`,`${t?`tz:${t}`:""}`].filter(r=>r).join(","),q=function(e,{locale:t,timeZone:r}={}){if(t||r){let m=F(t||[],r);e.localeInfo={locale:m?.locale||navigator?.language||"en",timeZone:m?.timeZone||Intl.DateTimeFormat().resolvedOptions().timeZone},e.formats=C(e.localeInfo.locale,e.localeInfo.timeZone)}return e.localeInfo??void 0},P=(e,{locale:t,timeZone:r,validate:m=!0}={})=>((t||r)&&(e.localeInfo=q(e,{locale:t,timeZone:r,validate:m})),e.localeInfo),K=e=>(delete e.localeInfo,a(e)),J=function(e,t,r,m){return(t||r)&&P(e,{locale:t,timeZone:r}),a(e)},x=function(e,t){return e=a(e),e.format(t?"MM":"WD",`l:${e.locale?.locale||"utc"}`)},Q=e=>{let t={};if(e=a(e),!e.locale)return e.toLocaleDateString();let{locale:r,timeZone:m}=e.locale;return e.locale?.timeZone&&(t={timeZone:e.locale.timeZone}),e.toLocaleDateString(r,t)},B=()=>".".concat(`${d.getMilliseconds()}`.padStart(3,"0")),V=(e,t)=>{console.log(e.localeInfo?.formats);let r={timeZone:e.localeInfo?.timeZone};return e.toLocaleTimeString(e.localeInfo?.locale,{timeZone:e.localeInfo?.timeZone}).concat(t?B():"")},R=e=>{let t=S(e),r=new Date(e.getFullYear(),0,1,14),m=new Date(new Date(r).setMonth(6)),M=Intl.DateTimeFormat("en-CA",{year:"numeric",timeZone:t,timeZoneName:"shortOffset"}),[w,O]=[M.format(r),M.format(m)];return l(w)-l(O)!==0};function ee(e,t){let r=0;for(e=a(e),t=a(t),e.time=t.time={hour:0,minutes:0,seconds:0,milliseconds:0},e>t&&([e,t]=[t,e]);e<nexDate;)e.add("1 day"),r+=1;return r}function j(e,{day:t,next:r=!1,midnight:m=!0}={}){e=a(e);let M=e.clone,w=M.getDay();M.time=m?{hour:0,minutes:0,seconds:0,milliseconds:0}:{};let O="sun,mon,tue,wed,thu,fri,sat".split(",").findIndex(te=>te===t),W=`${r?1:-1} days`;return O<0?e:function(){for(w=w===O?M.add(W).getDay():w;w!==O;)w=M.add(W).getDay();return M}()}return{clone:X,localizedDT:i,hasDST:R,getTimezone:S,dateStr:Q,firstWeekday:e=>({sunday:t=!1,midnight:r=!1}={})=>j(e,{day:t?"sun":"mon",midnight:r}),next:e=>(t,{midnight:r=!1}={})=>j(e,{day:t,midnight:r,next:!0}),previous:e=>(t,{midnight:r=!1}={})=>j(e,{day:t,midnight:r}),locale2Formats:e=>C(e.localeInfo?.locale,e.localeInfo?.timeZone),year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(v-1)||e.getMonth()+1,date:(e,{year:t,month:r,date:m}={})=>k(e,{FullYear:t,Month:h(r)?r-1:r,Date:m}),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>N(e,t),cloneDateTo:e=>t=>u(e,t),time:(e,{hour:t,minutes:r,seconds:m,milliseconds:M}={})=>U(e,{Hours:t,Minutes:r,Seconds:m,Milliseconds:M}),timeStr:e=>(t=!1)=>V(e,t),dateISOStr:e=>s(e),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>x(e,!0),weekDay:e=>x(e),self:e=>e,local:e=>T(e),locale:(e,{locale:t,timeZone:r}={})=>P(e,{locale:t,timeZone:r}),removeLocale:e=>K(e),relocate:e=>({locale:t,timeZone:r}={})=>J(e,t,r),differenceFrom:e=>t=>G({start:e,end:t}),values:e=>(t=!1)=>c(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>A(e.getFullYear(),e.getMonth()),isLeapYear:e=>A(e.getFullYear(),1)===29,format:e=>(...t)=>$(e,...t),daysUntil:e=>t=>ee(e,t),internal:()=>{},addYears:e=>(t=1)=>b(e,`${t} years`),addMonths:e=>(t=1)=>b(e,`${t} months`),addWeeks:e=>(t=1)=>b(e,`${t*7} days`),addDays:e=>(t=1)=>b(e,`${t} days`),nextYear:e=>b(e,"1 year"),nextWeek:e=>b(e,"7 days"),previousWeek:e=>b(e,"subtract, 7 days"),previousYear:e=>b(e,"subtract, 1 year"),nextMonth:e=>b(e,"1 month"),previousMonth:e=>b(e,"subtract, 1 month"),tomorrow:e=>b(e,"1 day"),yesterday:e=>b(e,"subtract, 1 day"),add:e=>(...t)=>b(e,...t),subtract:e=>(...t)=>b(e,...["subtract"].concat([t]).flat())}}var De=se();function se(){let a=E(l,D),F={get:(n,s)=>n[s]?S(n,s):a[s]?.(n),set:(n,s,o)=>a[s]?a[s](n,o):n[s],ownKeys:n=>Object.getOwnPropertyNames(a),has:(n,s)=>s in a||s in n};function g({name:n,fn:s,root:o,isMethod:c,proxifyResult:i}={}){if(!n||!s||!(s instanceof Function))return console.error("es-date-fiddler (extendWith): cannot extend without name and/or fn (function)");if(o)return Object.defineProperty(p,n,{value:(...f)=>{let u=s(...f);return u instanceof Date?l(u):u}}),console.log(`\u2714 created '${n}' root level method`);a=Object.freeze({...a,[n]:f=>(f=l(f),f.localeInfo&&f.relocate(f.localeInfo),c?(...u)=>i?l(s(f,...u)):s(f,...u):i?l(s(f)):s(f))}),console.log(`\u2714 created '${n}' ${c?"method":"getter"}`)}function D(n,s,o=!0){let c=i=>console.error(`invalid locale (time zone: "${i.timeZone}", locale: "${i.locale}"), associated your locale instead`);try{return Intl.DateTimeFormat(n,{timeZone:s}).resolvedOptions()}catch{return o&&c({locale:n,timeZone:s}),Intl.DateTimeFormat().resolvedOptions()}}function h(){return p()}function y({locale:n,timeZone:s}={}){if(!n&&!s)return!1;let o=D(n,s,!1);return n&&!s?o.locale===n:(s&&!n||o.locale===n)&&s===o.timeZone}function l(n){return new Proxy(n,F)}function S(n,s){return s in n&&n[s]instanceof Function?n[s].bind(n):n[s]}function p(n,s){n=Array.isArray(n)?new Date(...n):n;let o=n?.locale||n?.timeZone,c=(n||"")instanceof Date,i=o?new Date:new Date(c?n:Date.parse(n)),f=isNaN(i)?new Date(Date.now()):i,u=l(f);return(o||s)&&(u.locale=o?n:s),u}return Object.defineProperties(p,{now:{get(){return h()}},extendWith:{get(){return g}},validateLocale:{get(){return y}},ownFns:{get(){return Object.getOwnPropertyDescriptors(a)}}}),p}export{se as DateXFactory,De as default};
