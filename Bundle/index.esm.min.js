var x=L;function L(){let i=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((a,[y,f])=>({...a,[y]:f,[`${y}s`]:f}),{}),S=function(...a){if(a.length<1)return[];let y;a[0].startsWith("subtract")&&(y=!0,a[0].startsWith("subtract")&&a.length===1&&(a=a[0].split(",")),a=a.slice(1));let f=a.length===1?a[0]?.split(/,/):a;return f&&f.length&&(a=f.map(r=>r.trim())),a.map(function(r){return r.toLowerCase().split(/\s/).map(s=>(s=s.trim(),+s?y?-s:+s:s))})};return function(a,...y){let f=S(...y);return f.length&&f.forEach(([r,s])=>{s=i[s],+r&&s&&a[`set${s}`](a[`get${s}`]()+ +r)}),a}}var Z=U;function U(){let i=(y,f)=>{let r=isNaN(y),s=isNaN(f);if(r&&!s){let[d,D,c]=Array(3).fill("start- and/or end date are not valid");return{error:!0,message:d,full:D,clean:c}}if(s){let[d,D,c]=Array(3).fill("end date not valid");return{error:!0,message:d,full:D,clean:c}}if(r){let[d,D,c]=Array(3).fill("start date not valid");return{error:!0,message:d,full:D,clean:c}}return{error:!1}},S=a();return function({start:f,end:r}={}){let s=new Date(Date.parse(f)),d=new Date(Date.parse(r)),D=i(s,d);if(D.error)return D;let c=new Date(f),p=new Date(r),n=Math.abs(p-c),l=new Date(n),h=l.getUTCFullYear()-1970,F=l.getUTCMonth(),g=l.getUTCDate()-1,Y=l.getUTCHours(),b=l.getUTCMinutes(),$=l.getUTCSeconds(),u=l.getUTCMilliseconds(),I={years:h,months:F,days:g,hours:Y,minutes:b,seconds:$,milliseconds:u};return I.full=S({values:I,full:!0}),I.clean=S({values:I}),I};function a(){let y=(...c)=>p=>c.reduce((n,l)=>l(n),p),f=(c,p)=>c===1?p.slice(0,-1):p;return y(({values:c,full:p})=>[Object.entries(c).filter(([n])=>/^(years|month|days|hours|minutes|seconds)/i.test(n)),p],([c,p])=>p?c:c.filter(([,n])=>p?+n:n>0),c=>c.reduce((p,[n,l])=>[...p,`${l} ${f(l,n)}`],[]),c=>c.length<1?"Dates are equal":`${c.slice(0,-1).join(", ")}${c.length>1?" and ":""}${c.slice(-1).shift()}`)}}var X=N();function N(){let[i,S,a,y]=["2-digit","numeric","long","short"],f={fixed:{MM:{month:a},M:{month:y},m:{month:S},mm:{month:i},yyyy:{year:S},yy:{year:i},WD:{weekday:a},wd:{weekday:y},d:{day:S},dd:{day:i},h:{hour:S},hh:{hour:i},mi:{minute:S},mmi:{minute:i},s:{second:S},ss:{second:i},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:n=>({timeZoneName:n.slice(4)}),hrc:n=>({hourCycle:`h${n.slice(4)}`}),ds:n=>({dateStyle:n.slice(3)}),ts:n=>({timeStyle:n.slice(3)}),tz:n=>({timeZone:n.slice(3)}),e:n=>({era:n.slice(2)}),l:n=>({locale:n.slice(2)})}},r={...f,retrieveDyn(n){let l=n?.slice(0,n.indexOf(":"));return f.dynamic[l]&&f.dynamic[l](n)},get re(){return new RegExp(`\\b(${Object.keys(f.fixed).join("|")})\\b`,"g")}},s=(n="dtf",l=0)=>{let h=` ${n.replace(/(?<=\{)(.+?)(?=})/g,g=>`[${l++}]`).replace(/[{}]/g,"").trim()} `,F=n.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return F},formatString(g){h=g},set formatStr(g){h=g},get formatStr(){return h},get units(){return h.match(r.re)||[]},finalize(g="",Y="",b="",$=""){return h.replace(/~([\d+]?)/g,"$1").replace(/dtf/,g).replace(/era/,b).replace(/dp\b|~dp\b/,Y).replace(/yn\b/,$).replace(/\[(\d+?)]/g,(u,I)=>F[I].trim()).trim()}}},d=n=>n.replace(/\s+/g,""),D=(...n)=>n?.reduce((l,h)=>({...l,...r.retrieveDyn(h)||r.fixed[h]}),r.fixed.dl),c=(n,l,h)=>{let F=D(...d(h).split(",")),g=Intl.DateTimeFormat(F.locale,F).format(n);return l.finalize(g)},p=(n,l,h)=>{let F=D(...l.units.concat(d(h).split(",")).flat()),g={...r.fixed},Y=($,u)=>F[$]==="numeric"&&u.startsWith("0")?u.slice(1):u,b=Intl.DateTimeFormat(F.locale,F).formatToParts(n).reduce(($,u)=>u.type==="literal"?$:{...$,[u.type]:Y(u.type,u.value)},{});return g.ms=F.fractionalSecondDigits?g.msp:g.ms,g.yyyy=b.relatedYear?g.ry:g.yyyy,l.formatStr=l.formatStr.replace(r.re,$=>b[Object.keys(g[$]).shift()]||$),l.finalize(void 0,b.dayPeriod,b.era,b.yearName)};return(n,l,h="l:default")=>/ds:|ts:/.test(h)?c(n,s(void 0),h):p(n,s(l||void 0),h)}var z=k;function k(i){let S=N(),a=(e,t)=>{let o={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(o):o},y=(e,{locale:t,timeZone:o}={})=>((t||o)&&(e.localeInfo=I(e,{locale:t,timeZone:o})),e.localeInfo),f=(e,t)=>{t=i(t??new Date);let o=i(e);if(t){let{year:m,month:M,date:T}=o;t.date={year:m,month:M,date:T},o.locale&&(t.locale={locale:o.locale.locale,timeZone:o.locale.timeZone})}return t},r=(e,t)=>{t=i(t??new Date);let o=i(e),{hour:m,minutes:M,seconds:T,ms:C}=o;return t.time={hour:m,minutes:M,seconds:T,milliseconds:C},o.locale&&(t.locale={locale:o.locale.locale,timeZone:o.locale.timeZone}),t},s=function(e){let o=j(e)?.replace(/l:/,"locale: ").replace(/tz:/,"timeZone: ");return e.toLocaleString()+` !!invalid locale info => ${o}`},d=e=>{e=i(e);let t={};if(!e.locale)return e.toLocaleString();e.locale?.timeZone&&(t={timeZone:e.locale.timeZone});try{return e.toLocaleString(e.locale?.locale,t)}catch{return s(e)}},D=(e,...t)=>{e=i(e);let[o,m]=[e.locale,e.timeZone],M=j(e);try{return t.length===1?S(e,t[0],M):t.length?S(e,...t):e.toLocaleString(o,m?{timeZone:m}:void 0)}catch{return s(i(e))}},c=(e,{year:t,month:o,date:m}={})=>{if(t||o||m){let[M,T,C]=l(e);return e.setFullYear(t||M),e.setMonth((o||T+1)-1),e.setDate(m||C),!0}return e.getDate()},p=Z(),n=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],l=e=>[e.getFullYear(),e.getMonth(),e.getDate()],h=(e,t)=>{let o=n(e),m=t?`.${o.pop()}`.padStart(3,"0"):"";return`${o.slice(0,3).map(M=>`${M}`.padStart(2,"0")).join(":")}${m}`},F=function(e,{hour:t,minutes:o,seconds:m,milliseconds:M}={}){if(t||o||m||M){let[T,C,w,A]=n(e);return e.setHours(t??T),e.setMinutes(o??C),e.setSeconds(m??w),e.setMilliseconds(M??A),!0}return n(e)},g=(e,t)=>i(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),Y=e=>[e.getFullYear(),e.getMonth(),e.getDate()],b=e=>i(new Date(e)),$=x(),u=(e,...t)=>i($(e,...t)),I=function(e,{locale:t,timeZone:o}={}){[t,o]=[t||e.localeInfo?.locale,o||e.localeInfo?.timeZone];let m=[`${t?`l:${t}`:""}`,`${o?`tz:${o}`:""}`].filter(M=>M).join(", ");return e.localeInfo={formats:m,...t?{locale:t}:{},...o?{timeZone:o}:{}},e.localeInfo},j=e=>{e=i(e);let[t,o]=[e.localeInfo?.locale,e.localeInfo?.timeZone];return[`${t?`l:${t}`:""}`,`${o?`tz:${o}`:""}`].filter(m=>m).join(", ")},H=e=>{e=i(e),delete e.localeInfo},W=function(e,t,o){return e=i(e),e.locale={locale:t,timeZone:o},e},O=function(e,t){return e=i(e),e.format(t?"MM":"WD",`l:${e.locale?.locale||"utc"}`)};return Object.freeze({clone:b,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(v-1)||e.getMonth()+1,date:(e,{year:t,month:o,date:m}={})=>c(e,{year:t,month:o,date:m}),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneTimeTo:e=>t=>r(e,t),cloneDateTo:e=>t=>f(e,t),time:(e,{hour:t,minutes:o,seconds:m,milliseconds:M}={})=>F(e,{hour:t,minutes:o,seconds:m,milliseconds:M}),timeStr:e=>(t=!1)=>h(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>O(e,!0),weekDay:e=>O(e),self:e=>e,local:e=>d(e),locale:(e,{locale:t,timeZone:o}={})=>y(e,{locale:t,timeZone:o}),removeLocale:e=>()=>H(e),relocate:e=>({locale:t,timeZone:o}={})=>W(e,t,o),differenceFrom:e=>t=>p({start:e,end:t}),values:e=>t=>a(e,t),ISO:e=>e.toISOString(),daysInMonth:e=>g(e.getFullYear(),e.getMonth()),isLeapYear:e=>g(e.getFullYear(),1)===29,format:e=>(...t)=>D(e,...t),addYears:e=>(t=1)=>u(e,`${t} years`),addMonths:e=>(t=1)=>u(e,`${t} months`),addWeeks:e=>(t=1)=>u(e,`${t*7} days`),addDays:e=>(t=1)=>u(e,`${t} days`),nextYear:e=>u(e,"1 year"),nextWeek:e=>u(e,"7 days"),previousWeek:e=>u(e,"subtract, 7 days"),previousYear:e=>u(e,"subtract, 1 year"),nextMonth:e=>u(e,"1 month"),previousMonth:e=>u(e,"subtract, 1 month"),tomorrow:e=>u(e,"1 day"),yesterday:e=>u(e,"subtract, 1 day"),add:e=>(...t)=>u(e,...t),subtract:e=>(...t)=>u(e,...["subtract"].concat([t]).flat())})}var V=E();function E(){let i=z(a),S={get:(r,s)=>!r[s]&&i[s]?.(r)||y(r,s),set:(r,s,d)=>i[s]?.(r,d)||r[s]};function a(r){return new Proxy(r,S)}function y(r,s){return s in r&&r[s]instanceof Function?r[s].bind(r):r[s]}function f(r,s,d=!1){proxiedGetters[r]=D=>d?(...c)=>a(s(D,...c)):a(s(D))}return function(r,s){let d=r?.locale||r?.timeZone,D=(r||"")instanceof Date,c=d?new Date:new Date(D?r:Date.parse(r)),p=isNaN(c)?new Date(Date.now()):c,n=a(p);return(d||s)&&(n.locale=d?r:s),n}}export{E as DateXFactory,V as default};
