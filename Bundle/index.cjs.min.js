exports.DateFiddlerFactory=x;function x(){console.log("hello world");let f=j(b),h={get:(s,o)=>!s[o]&&f[o]?.(s)||r(s,o),set:(s,o,d)=>f[o]?.(s,d)||s[o]};return function(s){let o=new Date(Date.parse(s)),d=isNaN(o)?new Date(Date.now()):o;return b(d)};function b(s){return new Proxy(s,h)}function r(s,o){return o in s&&s[o]instanceof Function?s[o].bind(s):s[o]}}function U(){let[f,h,b,r]=["2-digit","numeric","long","short"],s={fixed:{MM:{month:b},M:{month:r},m:{month:h},mm:{month:f},yyyy:{year:h},yy:{year:f},WD:{weekday:b},wd:{weekday:r},d:{day:h},dd:{day:f},h:{hour:h},hh:{hour:f},mi:{minute:h},mmi:{minute:f},s:{second:h},ss:{second:f},ms:{fractionalSecondDigits:3},tz:{timeZoneName:"shortOffset"},dl:{locale:"default"},h12:{hour12:!1},yn:{yearName:""},ry:{relatedYear:!0},msp:{fractionalSecond:!0}},dynamic:{tzn:n=>({timeZoneName:n.slice(4)}),hrc:n=>({hourCycle:`h${n.slice(4)}`}),ds:n=>({dateStyle:n.slice(3)}),ts:n=>({timeStyle:n.slice(3)}),tz:n=>({timeZone:n.slice(3)}),e:n=>({era:n.slice(2)}),l:n=>({locale:n.slice(2)})}},o={...s,retrieveDyn(n){let a=n?.slice(0,n.indexOf(":"));return s.dynamic[a]&&s.dynamic[a](n)},get re(){return new RegExp(`\\b(${Object.keys(s.fixed).join("|")})\\b`,"g")}},d=(n="dtf",a=0)=>{let m=` ${n.replace(/(?<=\{)(.+?)(?=})/g,u=>`[${a++}]`).replace(/[{}]/g,"").trim()} `,D=n.match(/(?<=\{)(.+?)(?=})/g)||[];return{get texts(){return D},formatString(u){m=u},set formatStr(u){m=u},get formatStr(){return m},get units(){return m.match(o.re)||[]},finalize(u="",$="",i="",M=""){return m.replace(/~([\d+]?)/g,"$1").replace(/dtf/,u).replace(/era/,i).replace(/dp\b|~dp\b/,$).replace(/yn\b/,M).replace(/\[(\d+?)]/g,(S,F)=>D[F].trim()).trim()}}},l=n=>n.replace(/\s+/g,""),p=(...n)=>n?.reduce((a,m)=>({...a,...o.retrieveDyn(m)||o.fixed[m]}),o.fixed.dl),c=(n,a,m)=>{let D=p(...l(m).split(",")),u=Intl.DateTimeFormat(D.locale,D).format(n);return a.finalize(u)},g=(n,a,m)=>{let D=p(...a.units.concat(l(m).split(",")).flat()),u={...o.fixed},$=(M,S)=>D[M]==="numeric"&&S.startsWith("0")?S.slice(1):S,i=Intl.DateTimeFormat(D.locale,D).formatToParts(n).reduce((M,S)=>S.type==="literal"?M:{...M,[S.type]:$(S.type,S.value)},{});return u.ms=D.fractionalSecondDigits?u.msp:u.ms,u.yyyy=i.relatedYear?u.ry:u.yyyy,a.formatStr=a.formatStr.replace(o.re,M=>i[Object.keys(u[M]).shift()]||M),a.finalize(void 0,i.dayPeriod,i.era,i.yearName)};return(n,a,m="l:default")=>/ds:|ts:/.test(m)?c(n,d(void 0),m):g(n,d(a||void 0),m)}function j(f){let h=U(),b=(e,t)=>{let y={year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliseconds:e.getMilliseconds()};return t?Object.values(y):y},r=(e,t)=>(e.localeInfo=!("localeInfo"in e)||t?M(e,t):e.localeInfo,e.localeInfo),s=(e,t)=>{let y=new Date(...D(t??new Date)),T=c(e,!0);return u(new Date(...D(y).concat(T)))},o=(e,t)=>(e=f(e),e.toLocaleString(e.locale.l,{...t??{},timeZone:e.locale.tz})),d=(e,...t)=>{let y=f(e).locale;return t.length===1?h(e,t[0],y.formats):t.length?h(e,...t):e.toLocaleString(y.l)},l=(e,{year:t,month:y,date:T}={})=>{let[C,Y,I]=g(e);e.setFullYear(t||C),e.setMonth((y||Y+1)-1),e.setDate(T||I)},p=w(),c=e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],g=e=>[e.getFullYear(),e.getMonth(),e.getDate()],n=(e,t)=>{let y=c(e),T=t?`.${y.pop()}`.padStart(3,"0"):"";return`${y.slice(0,3).map(C=>`${C}`.padStart(2,"0")).join(":")}${T}`},a=function(e,{hour:t,minutes:y,seconds:T,milliseconds:C}={}){let[Y,I,N,O]=c(e);e.setHours(t??Y),e.setMinutes(y??I),e.setSeconds(T??N),e.setMilliseconds(C??O)},m=(e,t)=>f(new Date(e,t+1,1,0,0,0)).yesterday.getDate(),D=e=>[e.getFullYear(),e.getMonth(),e.getDate()],u=e=>f(new Date(e)),$=z(),i=(e,...t)=>f($(e,...t)),M=function(e,{locale:t="utc",timeZone:y="Etc/UTC"}={}){return e.localeInfo={l:t,tz:y,formats:`l:${t},tz:${y}`},e.localeInfo};return{...{clone:u,year:(e,t)=>t&&e.setFullYear(t)||e.getFullYear(),month:(e,t)=>t&&e.setMonth(t-1)||e.getMonth()+1,date:(e,t)=>t&&l(e,t)||e.getDate(e),hour:(e,t)=>t&&e.setHours(t)||e.getHours(),minutes:(e,t)=>t&&e.setMinutes(t)||e.getMinutes(),seconds:(e,t)=>t&&e.setSeconds(t)||e.getSeconds(),cloneDate:e=>u(new Date(...D(e).concat([0,0,0]))),cloneTime:e=>s(e),cloneTimeTo:e=>t=>s(e,t),time:(e,t)=>t&&a(e,t)||c(e),timeStr:e=>(t=!1)=>n(e,t),ms:(e,t)=>t&&e.setMilliseconds(t)||e.getMilliseconds(),monthName:e=>(e=f(e),e.format("MM",`l:${e.locale.l}`)),weekDay:e=>(e=f(e),e.format("WD",`l:${e.locale.l}`)),self:e=>e,local:(e,t)=>o(e,t),locale:(e,t)=>r(e,t),differenceFrom:e=>t=>p({start:e,end:t}),values:e=>t=>b(e,t),UTC:e=>Date.UTC(...b(e,!0)),UTCString:e=>e.toUTCString(),ISO:e=>e.toISOString(),daysInMonth:e=>m(e.getFullYear(),e.getMonth()),isLeapYear:e=>m(e.getFullYear(),1)===29,format:e=>(...t)=>d(e,...t)},...{addYears:e=>(t=1)=>i(e,`${t} years`),addMonths:e=>(t=1)=>i(e,`${t} months`),addWeeks:e=>(t=1)=>i(e,`${t*7} days`),addDays:e=>(t=1)=>i(e,`${t} days`),nextYear:e=>i(e,"1 year"),nextWeek:e=>i(e,"7 days"),previousWeek:e=>i(e,"subtract, 7 days"),previousYear:e=>i(e,"subtract, 1 year"),nextMonth:e=>i(e,"1 month"),previousMonth:e=>i(e,"subtract, 1 month"),tomorrow:e=>i(e,"1 day"),yesterday:e=>i(e,"subtract, 1 day"),add:e=>(...t)=>i(e,...t),subtract:e=>(...t)=>i(e,...["subtract"].concat([t]).flat())}}}function w(){let f=(r,s)=>{let o=isNaN(r),d=isNaN(s);if(o&&!d){let[l,p,c]=Array(3).fill("start and end date are not valid");return{error:!0,message:l,full:p,clean:c}}if(d){let[l,p,c]=Array(3).fill("end date not valid");return{error:!0,message:l,full:p,clean:c}}if(o){let[l,p,c]=Array(3).fill("start date not valid");return{error:!0,message:l,full:p,clean:c}}return{error:!1}},h=b();return function({start:s,end:o}={}){let d=new Date(Date.parse(s)),l=new Date(Date.parse(o)),p=f(d,l);if(p.error)return p;let c=new Date(s),g=new Date(o),n=Math.abs(g-c),a=new Date(n),m=a.getUTCFullYear()-1970,D=a.getUTCMonth(),u=a.getUTCDate()-1,$=a.getUTCHours(),i=a.getUTCMinutes(),M=a.getUTCSeconds(),S=a.getUTCMilliseconds(),F={years:m,months:D,days:u,hours:$,minutes:i,seconds:M,milliseconds:S};return F.full=h({values:F,full:!0}),F.clean=h({values:F}),F};function b(){let r=(...c)=>g=>c.reduce((n,a)=>a(n),g),s=(c,g)=>c===1?g.slice(0,-1):g;return r(({values:c,full:g})=>[Object.entries(c).filter(([n])=>/^(years|month|days|hours|minutes|seconds)/i.test(n)),g],([c,g])=>g?c:c.filter(([,n])=>g?+n:n>0),c=>c.reduce((g,[n,a])=>[...g,`${a} ${s(a,n)}`],[]),c=>c.length<1?"Dates are equal":`${c.slice(0,-1).join(", ")}${c.length>1?" and ":""}${c.slice(-1).shift()}`)}}function z(){let f=Object.entries({year:"FullYear",month:"Month",date:"Date",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"}).reduce((r,[s,o])=>({...r,[s]:o,[`${s}s`]:o}),{}),h=function(...r){if(r.length<1)return[];let s;(r[0]==="subtract"||r[0].startsWith("subtract"))&&(s=!0,r[0].startsWith("subtract")&&r.length===1&&(r=r[0].split(",")),r=r.slice(1));let o=r.length===1?r[0]?.split(/,/):r;return o&&o.length&&(r=o.map(d=>d.trim())),r.map(function(d){return d.toLowerCase().split(/\s/).map(l=>(l=l.trim(),+l?s?-l:+l:l))})};return function(r,...s){let o=h(...s);return o.length&&o.forEach(([d,l])=>{l=f[l],+d&&l&&r[`set${l}`](r[`get${l}`]()+ +d)}),r}}
